!function e(t,a,n){function o(s,i){if(!a[s]){if(!t[s]){var l="function"==typeof require&&require;if(!i&&l)return l(s,!0);if(r)return r(s,!0);var d=new Error("Cannot find module '"+s+"'");throw d.code="MODULE_NOT_FOUND",d}var c=a[s]={exports:{}};t[s][0].call(c.exports,function(e){var a=t[s][1][e];return o(a?a:e)},c,c.exports,e,t,a,n)}return a[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t,a){!function(t){"use strict";function a(e){e.preventDefault(),t(".photo-editing").slideUp(300),t(".photo-removing").slideDown(300)}function n(e){e.preventDefault(),t(".photo-removing").slideUp(300),t(".photo-editing").slideDown(300)}function o(e){e.preventDefault();var a=t(this).closest(".social__item");a.siblings().find(".social__form").hide(),a.find(".social__form").show()}function r(e){e.preventDefault(),t(this).closest(".social__form").hide()}var s=e("./modules/preloader.js"),i=e("./modules/modal.js"),l=e("./modules/slider.js"),d=e("./modules/animations.js"),c=e("./modules/ajax.js"),u=e("./modules/image_preview.js");t("#scene.axis").length&&t("#scene.axis").parallax({scalarX:3,scalarY:3,frictionX:.5,frictionY:.5}),d.fadePageOn("a.preload-link","#preloader",300),t.fn.animated=d.animateCss,t(".animated-test-container").animated("slideInRight"),t(".js-add-album").length&&i.init("#add-album-modal",".js-add-album",".js-close-modal"),t(".js-add-photos").length&&i.init("#add-photos-modal",".js-add-photos",".js-close-modal"),t(".js-edit-photo").length&&i.init("#edit-photo-modal",".js-edit-photo",".js-close-modal"),t(".js-edit-user").length&&i.init("#edit-user-modal",".js-edit-user",".js-close-modal"),t(".js-edit-user-header").length&&i.init("#edit-user-header",".js-edit-user-header",".js-close-header"),t(".js-edit-album-header").length&&i.init("#edit-album-header",".js-edit-album-header",".js-close-header"),t(".js-show-photo-removing").length>0&&t(".js-show-photo-removing").on("click",a),t(".js-hide-photo-removing").length>0&&t(".js-hide-photo-removing").on("click",n),t(".js-open-slider").length>0&&l.init("#slider",".js-open-slider",".js-close-slider",".js-slider-next",".js-slider-prev"),t(".js-open-social-form").length>0&&t(".js-open-social-form").on("click",o),t(".js-close-form").length>0&&t(".js-close-form").on("click",r),t("#flip-card").click(function(){t("body").addClass("card_flipped")}),t("#unflip-card").click(function(e){e.preventDefault(),t("body").removeClass("card_flipped")}),t("#show-recovery").click(function(e){e.preventDefault(),t("body").addClass("show_recovery")}),t("#hide-recovery").click(function(e){e.preventDefault(),t("body").removeClass("show_recovery")}),s(),c.init(),u.init()}(jQuery)},{"./modules/ajax.js":2,"./modules/animations.js":3,"./modules/image_preview.js":4,"./modules/modal.js":5,"./modules/preloader.js":6,"./modules/slider.js":7}],2:[function(e,t,a){var n=function(){function e(){$("#edit-user-header").on("submit",function(e){e.preventDefault();var t=new FormData($(e.target)[0]);$.ajax({method:"POST",url:"/user/savedata",data:t,processData:!1,contentType:!1}).done(function(a){"success"==a.status&&(void 0!==a.background&&$(".main-page").css({backgroundImage:"url("+a.background+")"}),void 0!==a.avatar&&$("#user-avatar").attr("src",a.avatar),$(".user-info__name").text(t.get("name")),$(".user-info__desc").text(t.get("description")),$("#social__link_vk").attr("href",t.get("vk")),$("#social__link_fb").attr("href",t.get("facebook")),$("#social__link_tw").attr("href",t.get("twitter")),$("#social__link_gg").attr("href",t.get("google")),$("#social__link_email").attr("href","mailto:"+t.get("email"))),$(e.target).removeClass("show").addClass("hide"),$("body").removeClass("has-overflow-hidden")})}),$("#form-add-album").on("submit",function(e){e.preventDefault();var t=new FormData($(e.target)[0]);console.log("add-album"),$.ajax({method:"POST",url:"/album/save",data:t,processData:!1,contentType:!1}).done(function(e){console.log(e)})})}return{init:e}}();t.exports={init:n.init}},{}],3:[function(e,t,a){function n(e,t,a){$(document).on("click",e,function(e){var n=$(this).attr("href");if("#"!=n[0])return e.preventDefault(),$(t).fadeIn(a,function(){return document.location=null!=n?n:"/"})})}var o=function(e){$(this).each(function(){var t=$(this);t.css({opacity:0}).addClass("animated").waypoint(function(a){"down"===a&&t.addClass(e).css({opacity:1})},{offset:"90%"})})};t.exports={animateCss:o,fadePageOn:n}},{}],4:[function(e,t,a){var n=function(){function e(){$("#input_avatar").on("change",function(){var e=this,t=$("#preview_avatar");if(e.files&&e.files[0]){var a=new FileReader;a.onload=function(e){t.attr("src",e.target.result)},a.readAsDataURL(e.files[0])}}),$("#input_background").on("change",function(){var e=this,t=$("#bg-edit-user");if(e.files&&e.files[0]){var a=new FileReader;a.onload=function(e){t.css({backgroundImage:"url("+e.target.result+")"})},a.readAsDataURL(e.files[0])}})}return{init:e}}();t.exports={init:n.init}},{}],5:[function(e,t,a){function n(e,t,a){var n=$(e),o=$(t),r=n.find(a),s=$("body");o.on("click",function(e){e.preventDefault(),n.removeClass("hide").addClass("show"),s.addClass("has-overflow-hidden")}),r.on("click",function(e){e.preventDefault(),n.addClass("hide").removeClass("show"),s.removeClass("has-overflow-hidden")})}t.exports={init:n}},{}],6:[function(e,t,a){var n=$("#preloader"),o=$("#preloader__percentage"),r=["background","backgroundImage","listStyleImage","borderImage","borderCornerImage","cursor"],s=["srcset"],i=/url\(\s*(['"]?)(.*?)\1\s*\)/g,l=[],d=0,c=0,u=$("#preloader__img .bar__outer"),f=$("#preloader__img .bar__center"),h=$("#preloader__img .bar__inner"),m=Math.PI*(2*u.attr("r")),v=Math.PI*(2*f.attr("r")),p=Math.PI*(2*h.attr("r"));t.exports=function(){function e(){var e=Math.ceil((c+1)/d*100);if(c+=1,e=e>100?100:e,u.css({strokeDashoffset:(100-e)/100*m}),e>50&&f.css({strokeDashoffset:(100-e)/100*v}),100==e&&h.css({strokeDashoffset:(100-e)/100*p}),o.html(e),c===d)return t()}function t(){o.css({animation:"none"}),n.delay(700).fadeOut(700,function(){o.remove()})}function a(t){for(var a=0;a<t;a++){var n=new Image;n.onload=e,n.onerror=e,l[a].srcset&&(n.srcset=l[a].srcset),n.src=l[a].src}}$("*").each(function(){var e=$(this);e.is("img")&&e.attr("src")&&l.push({src:e.attr("src"),element:e[0]}),$.each(r,function(t,a){var n,o=e.css(a);return!o||(n=i.exec(o),void(n&&l.push({src:n[2],element:e[0]})))}),$.each(s,function(t,a){var n=e.attr(a);return!n||void l.push({src:e.attr("src"),srcset:e.attr("srcset"),element:e[0]})})}),d=l.length,0===d?(o.html(100),t()):a(d)}},{}],7:[function(e,t,a){function n(e,t,a,n,d){i=$(e);var c=$(t),u=i.find(a),f=i.find(n),h=i.find(d),m=$("body");c.on("click",function(e){e.preventDefault(),l=$(this).closest(".album-item"),s(l),i.removeClass("hide").addClass("show"),m.addClass("has-overflow-hidden")}),u.on("click",function(e){e.preventDefault(),i.addClass("hide").removeClass("show"),m.removeClass("has-overflow-hidden")}),f.on("click",function(e){e.preventDefault(),o()}),h.on("click",function(e){e.preventDefault(),r()})}function o(){var e=l.next(".album-item");e.length&&(s(e),l=e)}function r(){var e=l.prev(".album-item");e.length&&(s(e),l=e)}function s(e){var t=e.data("thumb"),a=e.data("title"),n=e.data("likes"),o=e.data("user_name"),r=e.data("user_avatar"),s=e.data("desc"),l=i.find(".comments__holder"),d=e.find(".comments__item");l.html(""),d.each(function(e,t){l.append(t)});var s=e.data("desc"),s=e.data("desc"),s=e.data("desc");i.find(".slider__img").attr("src",t),i.find(".slider__title").html(a),i.find(".likes__count").html(n),i.find(".slider__text").html(s),i.find(".slider__author-name").html(o),i.find(".slider__author-photo img").attr("src",r);var c=i.find(".slider__photo"),u=i.find(".slider__img").height();c.animate({height:u},300)}var i,l;t.exports={init:n,showNext:o,showPrev:r}},{}]},{},[1]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJlIiwidCIsIm4iLCJyIiwicyIsIm8iLCJ1IiwiYSIsInJlcXVpcmUiLCJpIiwiZiIsIkVycm9yIiwiY29kZSIsImwiLCJleHBvcnRzIiwiY2FsbCIsImxlbmd0aCIsIjEiLCJtb2R1bGUiLCIkIiwic2hvd1Bob3RvUmVtb3ZpbmdCbG9jayIsInByZXZlbnREZWZhdWx0Iiwic2xpZGVVcCIsInNsaWRlRG93biIsImhpZGVQaG90b1JlbW92aW5nQmxvY2siLCJzaG93U29jaWFsRm9ybSIsInNvY2lhbEl0ZW0iLCJ0aGlzIiwiY2xvc2VzdCIsInNpYmxpbmdzIiwiZmluZCIsImhpZGUiLCJzaG93IiwiaGlkZVNvY2lhbEZvcm0iLCJwcmVsb2FkZXIiLCJtb2RhbCIsInNsaWRlciIsImFuaW1hdGlvbnMiLCJzZXRBamF4UmVzcG9uY2UiLCJpbWFnZVByZXZpZXciLCJwYXJhbGxheCIsInNjYWxhclgiLCJzY2FsYXJZIiwiZnJpY3Rpb25YIiwiZnJpY3Rpb25ZIiwiZmFkZVBhZ2VPbiIsImZuIiwiYW5pbWF0ZWQiLCJhbmltYXRlQ3NzIiwiaW5pdCIsIm9uIiwiY2xpY2siLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwialF1ZXJ5IiwiLi9tb2R1bGVzL2FqYXguanMiLCIuL21vZHVsZXMvYW5pbWF0aW9ucy5qcyIsIi4vbW9kdWxlcy9pbWFnZV9wcmV2aWV3LmpzIiwiLi9tb2R1bGVzL21vZGFsLmpzIiwiLi9tb2R1bGVzL3ByZWxvYWRlci5qcyIsIi4vbW9kdWxlcy9zbGlkZXIuanMiLCIyIiwic2V0QWpheFJlc3BvbmNlcyIsImZvcm1EYXRhIiwiRm9ybURhdGEiLCJ0YXJnZXQiLCJhamF4IiwibWV0aG9kIiwidXJsIiwiZGF0YSIsInByb2Nlc3NEYXRhIiwiY29udGVudFR5cGUiLCJkb25lIiwibXNnIiwic3RhdHVzIiwidW5kZWZpbmVkIiwiYmFja2dyb3VuZCIsImNzcyIsImJhY2tncm91bmRJbWFnZSIsImF2YXRhciIsImF0dHIiLCJ0ZXh0IiwiZ2V0IiwiY29uc29sZSIsImxvZyIsIjMiLCJsaW5rX3NlbGVjdG9yIiwib3ZlcmxheV9zZWxlY3RvciIsInRpbWUiLCJkb2N1bWVudCIsImhyZWYiLCJmYWRlSW4iLCJsb2NhdGlvbiIsImluX2VmZmVjdCIsImVhY2giLCJlbGVtIiwib3BhY2l0eSIsIndheXBvaW50IiwiZGlyIiwib2Zmc2V0IiwiNCIsImlucHV0IiwiZmlsZXMiLCJyZWFkZXIiLCJGaWxlUmVhZGVyIiwib25sb2FkIiwicmVzdWx0IiwicmVhZEFzRGF0YVVSTCIsImJnIiwiNSIsImNvbnRhaW5lciIsIm9wZW5CdG4iLCJjbG9zZUJ0biIsIm9wZW4iLCJjbG9zZSIsImJvZHkiLCI2IiwicHJlbG9hZGVyX2NvbnRhaW5lciIsInByZWxvYWRlcl9wZXJjZW50YWdlIiwiaGFzSW1hZ2VQcm9wZXJ0aWVzIiwiaGFzSW1hZ2VBdHRyaWJ1dGVzIiwibWF0Y2hfdXJsIiwiYWxsX2ltYWdlcyIsInRvdGFsIiwiY291bnQiLCJjaXJjbGVfbyIsImNpcmNsZV9jIiwiY2lyY2xlX2kiLCJsZW5ndGhfbyIsIk1hdGgiLCJQSSIsImxlbmd0aF9jIiwibGVuZ3RoX2kiLCJpbWdfbG9hZGVkIiwicGVyY2VudGFnZSIsImNlaWwiLCJzdHJva2VEYXNob2Zmc2V0IiwiaHRtbCIsImRvbmVfbG9hZGluZyIsImFuaW1hdGlvbiIsImRlbGF5IiwiZmFkZU91dCIsInJlbW92ZSIsImltYWdlc19sb29wIiwidGVzdF9pbWFnZSIsIkltYWdlIiwib25lcnJvciIsInNyY3NldCIsInNyYyIsImVsZW1lbnQiLCJpcyIsInB1c2giLCJwcm9wZXJ0eSIsIm1hdGNoIiwicHJvcGVydHlWYWx1ZSIsImV4ZWMiLCJhdHRyaWJ1dGUiLCJhdHRyaWJ1dGVWYWx1ZSIsIjciLCJuZXh0QnRuIiwicHJldkJ0biIsIm5leHQiLCJwcmV2IiwiY3VycmVudCIsInNob3dTbGlkZSIsInNob3dOZXh0Iiwic2hvd1ByZXYiLCJuZXh0U2xpZGUiLCJwcmV2U2xpZGUiLCJfaXRlbSIsImltZ190aHVtYiIsImltZ190aXRsZSIsImltZ19saWtlcyIsImltZ191c2VyX25hbWUiLCJpbWdfdXNlcl9hdmF0YXIiLCJpbWdfZGVzYyIsImNvbW1lbnRzX2hvbGRlciIsImltZ19jb21tZW50cyIsImtleSIsInZhbHVlIiwiYXBwZW5kIiwic2xpZGVyUGhvdG8iLCJzbGlkZUhlaWdodCIsImhlaWdodCIsImFuaW1hdGUiXSwibWFwcGluZ3MiOiJDQUFBLFFBQVVBLEdBQUVDLEVBQUVDLEVBQUVDLEdBQUcsUUFBU0MsR0FBRUMsRUFBRUMsR0FBRyxJQUFJSixFQUFFRyxHQUFHLENBQUMsSUFBSUosRUFBRUksR0FBRyxDQUFDLEdBQUlFLEdBQWtCLGtCQUFUQyxVQUFxQkEsT0FBUSxLQUFJRixHQUFHQyxFQUFFLE1BQU9BLEdBQUVGLEdBQUUsRUFBSSxJQUFHSSxFQUFFLE1BQU9BLEdBQUVKLEdBQUUsRUFBSSxJQUFJSyxHQUFFLEdBQUlDLE9BQU0sdUJBQXVCTixFQUFFLElBQUssTUFBTUssR0FBRUUsS0FBSyxtQkFBbUJGLEVBQUUsR0FBSUcsR0FBRVgsRUFBRUcsSUFBSVMsV0FBWWIsR0FBRUksR0FBRyxHQUFHVSxLQUFLRixFQUFFQyxRQUFRLFNBQVNkLEdBQUcsR0FBSUUsR0FBRUQsRUFBRUksR0FBRyxHQUFHTCxFQUFHLE9BQU9JLEdBQUVGLEVBQUVBLEVBQUVGLElBQUlhLEVBQUVBLEVBQUVDLFFBQVFkLEVBQUVDLEVBQUVDLEVBQUVDLEdBQUcsTUFBT0QsR0FBRUcsR0FBR1MsUUFBa0QsSUFBSSxHQUExQ0wsR0FBa0Isa0JBQVRELFVBQXFCQSxRQUFnQkgsRUFBRSxFQUFFQSxFQUFFRixFQUFFYSxPQUFPWCxJQUFJRCxFQUFFRCxFQUFFRSxHQUFJLE9BQU9ELEtBQUthLEdBQUcsU0FBU1QsRUFBUVUsRUFBT0osSUFDdmQsU0FBVUssR0FDVCxZQTRGQSxTQUFTQyxHQUF1QnBCLEdBQy9CQSxFQUFFcUIsaUJBQ0ZGLEVBQUUsa0JBQWtCRyxRQUFRLEtBQzVCSCxFQUFF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Q1ZDLFNBQVVBLGFBSUEiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkoezE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuKGZ1bmN0aW9uKCQpIHtcclxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHJcblx0dmFyIHByZWxvYWRlciA9IHJlcXVpcmUoXCIuL21vZHVsZXMvcHJlbG9hZGVyLmpzXCIpLFxyXG5cdFx0Ly8gaGVscGVycyA9IHJlcXVpcmUoXCIuL21vZHVsZXMvaGVscGVycy5qc1wiKSxcclxuXHRcdG1vZGFsID0gcmVxdWlyZShcIi4vbW9kdWxlcy9tb2RhbC5qc1wiKSxcclxuXHRcdHNsaWRlciA9IHJlcXVpcmUoXCIuL21vZHVsZXMvc2xpZGVyLmpzXCIpLFxyXG5cdFx0YW5pbWF0aW9ucyA9IHJlcXVpcmUoXCIuL21vZHVsZXMvYW5pbWF0aW9ucy5qc1wiKSxcclxuXHRcdHNldEFqYXhSZXNwb25jZSA9IHJlcXVpcmUoXCIuL21vZHVsZXMvYWpheC5qc1wiKSxcclxuXHRcdGltYWdlUHJldmlldyA9IHJlcXVpcmUoXCIuL21vZHVsZXMvaW1hZ2VfcHJldmlldy5qc1wiKTtcclxuXHJcblx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblx0Ly8gQWRhcHRpdmUgYnJlYWtwb2ludHNcclxuXHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHQvLyB2YXIgc2Nyb2xsYmFyX3dpZHRoID0gaGVscGVycy5nZXRTY3JvbGxiYXJXaWR0aCgpLFxyXG5cdC8vIFx0c2NyZWVuX3NpemVzID0ge1xyXG5cdC8vIFx0XHRtb2JpbGUgOiA0ODAgLSBzY3JvbGxiYXJfd2lkdGgsXHJcblx0Ly8gXHRcdHRhYmxldCA6IDc2OCAtIHNjcm9sbGJhcl93aWR0aCxcclxuXHQvLyBcdFx0bGltaXQgOiAyMDAwIC0gc2Nyb2xsYmFyX3dpZHRoXHJcblx0Ly8gXHR9O1xyXG5cclxuXHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHQvLyBQYXJhbGxheFxyXG5cdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuXHQvLyBNYWluIHBhZ2UgbW91c2UgcGFyYWxsYXhcclxuXHRpZigkKFwiI3NjZW5lLmF4aXNcIikubGVuZ3RoKXtcclxuXHRcdCQoXCIjc2NlbmUuYXhpc1wiKS5wYXJhbGxheCh7XHJcblx0XHRcdHNjYWxhclg6IDMsXHJcblx0XHRcdHNjYWxhclk6IDMsXHJcblx0XHRcdGZyaWN0aW9uWDogMC41LFxyXG5cdFx0XHRmcmljdGlvblk6IDAuNVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHQvLyBBbmltYXRpb25zIGV4YW1wbGVcclxuXHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHRhbmltYXRpb25zLmZhZGVQYWdlT24oXCJhLnByZWxvYWQtbGlua1wiLCBcIiNwcmVsb2FkZXJcIiwgMzAwKTtcclxuXHJcblx0JC5mbi5hbmltYXRlZCA9IGFuaW1hdGlvbnMuYW5pbWF0ZUNzcztcclxuXHQvLyBFeGFtcGxlXHJcblx0JChcIi5hbmltYXRlZC10ZXN0LWNvbnRhaW5lclwiKS5hbmltYXRlZChcInNsaWRlSW5SaWdodFwiKTtcclxuXHJcblxyXG5cclxuXHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHQvLyBJbml0IEFkZCBBbGJ1bSBNb2RhbFxyXG5cdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cdGlmICgkKFwiLmpzLWFkZC1hbGJ1bVwiKS5sZW5ndGgpIHtcclxuXHRcdG1vZGFsLmluaXQoXCIjYWRkLWFsYnVtLW1vZGFsXCIsIFwiLmpzLWFkZC1hbGJ1bVwiLCBcIi5qcy1jbG9zZS1tb2RhbFwiKTtcclxuXHR9XHJcblxyXG5cdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cdC8vIEluaXQgQWRkIFBob3RvcyBNb2RhbFxyXG5cdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cdGlmICgkKFwiLmpzLWFkZC1waG90b3NcIikubGVuZ3RoKSB7XHJcblx0XHRtb2RhbC5pbml0KFwiI2FkZC1waG90b3MtbW9kYWxcIiwgXCIuanMtYWRkLXBob3Rvc1wiLCBcIi5qcy1jbG9zZS1tb2RhbFwiKTtcclxuXHR9XHJcblxyXG5cdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cdC8vIEluaXQgRWRpdCBQaG90byBNb2RhbFxyXG5cdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cdGlmICgkKFwiLmpzLWVkaXQtcGhvdG9cIikubGVuZ3RoKSB7XHJcblx0XHRtb2RhbC5pbml0KFwiI2VkaXQtcGhvdG8tbW9kYWxcIiwgXCIuanMtZWRpdC1waG90b1wiLCBcIi5qcy1jbG9zZS1tb2RhbFwiKTtcclxuXHR9XHJcblxyXG5cdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cdC8vIEluaXQgRWRpdCBVc2VyIE1vZGFsXHJcblx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblx0aWYgKCQoXCIuanMtZWRpdC11c2VyXCIpLmxlbmd0aCkge1xyXG5cdFx0bW9kYWwuaW5pdChcIiNlZGl0LXVzZXItbW9kYWxcIiwgXCIuanMtZWRpdC11c2VyXCIsIFwiLmpzLWNsb3NlLW1vZGFsXCIpO1xyXG5cdH1cclxuXHJcblxyXG5cdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cdC8vIEluaXQgRWRpdCBVc2VyIE1vZGFsIChpbiBIZWFkZXIpXHJcblx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblx0aWYgKCQoXCIuanMtZWRpdC11c2VyLWhlYWRlclwiKS5sZW5ndGgpIHtcclxuXHRcdG1vZGFsLmluaXQoXCIjZWRpdC11c2VyLWhlYWRlclwiLCBcIi5qcy1lZGl0LXVzZXItaGVhZGVyXCIsIFwiLmpzLWNsb3NlLWhlYWRlclwiKTtcclxuXHR9XHJcblxyXG5cdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cdC8vIEluaXQgRWRpdCBBbGJ1bSBNb2RhbCAoaW4gSGVhZGVyKVxyXG5cdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cdGlmICgkKFwiLmpzLWVkaXQtYWxidW0taGVhZGVyXCIpLmxlbmd0aCkge1xyXG5cdFx0bW9kYWwuaW5pdChcIiNlZGl0LWFsYnVtLWhlYWRlclwiLCBcIi5qcy1lZGl0LWFsYnVtLWhlYWRlclwiLCBcIi5qcy1jbG9zZS1oZWFkZXJcIik7XHJcblx0fVxyXG5cclxuXHJcblx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblx0Ly8gRWRpdCBVc2VyIE1vZGFsIC0gRGVsZXRlIFBob3RvXHJcblx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblx0ZnVuY3Rpb24gc2hvd1Bob3RvUmVtb3ZpbmdCbG9jayhlKSB7XHJcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHQkKFwiLnBob3RvLWVkaXRpbmdcIikuc2xpZGVVcCgzMDApO1xyXG5cdFx0JChcIi5waG90by1yZW1vdmluZ1wiKS5zbGlkZURvd24oMzAwKTtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIGhpZGVQaG90b1JlbW92aW5nQmxvY2soZSkge1xyXG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0JChcIi5waG90by1yZW1vdmluZ1wiKS5zbGlkZVVwKDMwMCk7XHJcblx0XHQkKFwiLnBob3RvLWVkaXRpbmdcIikuc2xpZGVEb3duKDMwMCk7XHJcblx0fVxyXG5cclxuXHRpZiAoJChcIi5qcy1zaG93LXBob3RvLXJlbW92aW5nXCIpLmxlbmd0aCA+IDApIHtcclxuXHRcdCQoXCIuanMtc2hvdy1waG90by1yZW1vdmluZ1wiKS5vbihcImNsaWNrXCIsIHNob3dQaG90b1JlbW92aW5nQmxvY2spO1xyXG5cdH1cclxuXHJcblx0aWYgKCQoXCIuanMtaGlkZS1waG90by1yZW1vdmluZ1wiKS5sZW5ndGggPiAwKSB7XHJcblx0XHQkKFwiLmpzLWhpZGUtcGhvdG8tcmVtb3ZpbmdcIikub24oXCJjbGlja1wiLCBoaWRlUGhvdG9SZW1vdmluZ0Jsb2NrKTtcclxuXHR9XHJcblxyXG5cclxuXHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHQvLyBJbml0IEVkaXQgQWxidW0gTW9kYWwgKGluIEhlYWRlcilcclxuXHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHRpZiAoJChcIi5qcy1vcGVuLXNsaWRlclwiKS5sZW5ndGggPiAwKSB7XHJcblx0XHRzbGlkZXIuaW5pdChcIiNzbGlkZXJcIiwgXCIuanMtb3Blbi1zbGlkZXJcIiwgXCIuanMtY2xvc2Utc2xpZGVyXCIsIFwiLmpzLXNsaWRlci1uZXh0XCIsIFwiLmpzLXNsaWRlci1wcmV2XCIpO1xyXG5cdH1cclxuXHJcblxyXG5cclxuXHJcblx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblx0Ly8gU2hvdyBTb2NpYWwgSXRlbXMgRm9ybXNcclxuXHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHRmdW5jdGlvbiBzaG93U29jaWFsRm9ybShlKSB7XHJcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHR2YXIgc29jaWFsSXRlbSA9ICAkKHRoaXMpLmNsb3Nlc3QoXCIuc29jaWFsX19pdGVtXCIpO1xyXG5cdFx0c29jaWFsSXRlbS5zaWJsaW5ncygpLmZpbmQoXCIuc29jaWFsX19mb3JtXCIpLmhpZGUoKTtcclxuXHRcdHNvY2lhbEl0ZW0uZmluZChcIi5zb2NpYWxfX2Zvcm1cIikuc2hvdygpO1xyXG5cdH1cclxuXHRmdW5jdGlvbiBoaWRlU29jaWFsRm9ybShlKSB7XHJcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHQkKHRoaXMpLmNsb3Nlc3QoXCIuc29jaWFsX19mb3JtXCIpLmhpZGUoKTtcclxuXHR9XHJcblxyXG5cdGlmICgkKFwiLmpzLW9wZW4tc29jaWFsLWZvcm1cIikubGVuZ3RoID4gMCkge1xyXG5cdFx0JChcIi5qcy1vcGVuLXNvY2lhbC1mb3JtXCIpLm9uKFwiY2xpY2tcIiwgc2hvd1NvY2lhbEZvcm0pO1xyXG5cdH1cclxuXHRpZiAoJChcIi5qcy1jbG9zZS1mb3JtXCIpLmxlbmd0aCA+IDApIHtcclxuXHRcdCQoXCIuanMtY2xvc2UtZm9ybVwiKS5vbihcImNsaWNrXCIsIGhpZGVTb2NpYWxGb3JtKTtcclxuXHR9XHJcblxyXG5cclxuXHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHQvLyBMb2dpbiBjYXJkIGZsaXBcclxuXHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHQkKFwiI2ZsaXAtY2FyZFwiKS5jbGljayhmdW5jdGlvbigpIHtcclxuXHRcdCQoXCJib2R5XCIpLmFkZENsYXNzKFwiY2FyZF9mbGlwcGVkXCIpO1xyXG5cdH0pO1xyXG5cclxuXHQkKFwiI3VuZmxpcC1jYXJkXCIpLmNsaWNrKGZ1bmN0aW9uKGUpIHtcclxuXHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdCQoXCJib2R5XCIpLnJlbW92ZUNsYXNzKFwiY2FyZF9mbGlwcGVkXCIpO1xyXG5cdH0pO1xyXG5cclxuXHJcblx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblx0Ly8gTG9naW4gc2hvdyBSZWNvdmVyeSBwYXNzd29yZCBDYXJkXHJcblx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblx0JChcIiNzaG93LXJlY292ZXJ5XCIpLmNsaWNrKGZ1bmN0aW9uKGUpIHtcclxuXHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdCQoXCJib2R5XCIpLmFkZENsYXNzKFwic2hvd19yZWNvdmVyeVwiKTtcclxuXHR9KTtcclxuXHJcblx0JChcIiNoaWRlLXJlY292ZXJ5XCIpLmNsaWNrKGZ1bmN0aW9uKGUpIHtcclxuXHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdCQoXCJib2R5XCIpLnJlbW92ZUNsYXNzKFwic2hvd19yZWNvdmVyeVwiKTtcclxuXHR9KTtcclxuXHJcblxyXG5cdHByZWxvYWRlcigpO1xyXG5cclxuXHRzZXRBamF4UmVzcG9uY2UuaW5pdCgpO1xyXG5cdGltYWdlUHJldmlldy5pbml0KCk7XHJcblxyXG59KShqUXVlcnkpO1xufSx7XCIuL21vZHVsZXMvYWpheC5qc1wiOjIsXCIuL21vZHVsZXMvYW5pbWF0aW9ucy5qc1wiOjMsXCIuL21vZHVsZXMvaW1hZ2VfcHJldmlldy5qc1wiOjQsXCIuL21vZHVsZXMvbW9kYWwuanNcIjo1LFwiLi9tb2R1bGVzL3ByZWxvYWRlci5qc1wiOjYsXCIuL21vZHVsZXMvc2xpZGVyLmpzXCI6N31dLDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuLyoqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4qIC0tLS0tINCj0YHRgtCw0L3QvtCy0LrQsCBhamF4LdC30LDQv9GA0L7RgdC+0LIgLS0tLS0tLS1cclxuKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xyXG5cclxudmFyIHNldEFqYXhSZXNwb25jZXMgPSAoZnVuY3Rpb24oKSB7XHJcblxyXG4gIGZ1bmN0aW9uIGluaXQoKSB7XHJcblxyXG4gICAgLy8g0KDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjQtSDQtNCw0L3QvdGL0YUg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXHJcbiAgICAkKCcjZWRpdC11c2VyLWhlYWRlcicpLm9uKCdzdWJtaXQnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgkKGUudGFyZ2V0KVswXSk7XHJcblxyXG4gICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICAgICAgICB1cmw6IFwiL3VzZXIvc2F2ZWRhdGFcIixcclxuICAgICAgICAgICAgZGF0YTogZm9ybURhdGEsXHJcbiAgICAgICAgICAgIHByb2Nlc3NEYXRhOiBmYWxzZSxcclxuICAgICAgICAgICAgY29udGVudFR5cGU6IGZhbHNlXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmRvbmUoZnVuY3Rpb24gKG1zZykge1xyXG4vLyBjb25zb2xlLmxvZyhtc2cpO1xyXG5cclxuICAgICAgICAgICAgaWYobXNnLnN0YXR1cyA9PSAnc3VjY2VzcycpIHtcclxuICAgICAgICAgICAgICBpZihtc2cuYmFja2dyb3VuZCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcubWFpbi1wYWdlJykuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZEltYWdlOiBcInVybChcIittc2cuYmFja2dyb3VuZCtcIilcIlxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGlmKG1zZy5hdmF0YXIgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgJCgnI3VzZXItYXZhdGFyJykuYXR0cignc3JjJywgbXNnLmF2YXRhcik7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICQoJy51c2VyLWluZm9fX25hbWUnKS50ZXh0KGZvcm1EYXRhLmdldCgnbmFtZScpKTtcclxuICAgICAgICAgICAgICAkKCcudXNlci1pbmZvX19kZXNjJykudGV4dChmb3JtRGF0YS5nZXQoJ2Rlc2NyaXB0aW9uJykpO1xyXG4gICAgICAgICAgICAgICQoJyNzb2NpYWxfX2xpbmtfdmsnKS5hdHRyKCdocmVmJywgZm9ybURhdGEuZ2V0KCd2aycpKTtcclxuICAgICAgICAgICAgICAkKCcjc29jaWFsX19saW5rX2ZiJykuYXR0cignaHJlZicsIGZvcm1EYXRhLmdldCgnZmFjZWJvb2snKSk7XHJcbiAgICAgICAgICAgICAgJCgnI3NvY2lhbF9fbGlua190dycpLmF0dHIoJ2hyZWYnLCBmb3JtRGF0YS5nZXQoJ3R3aXR0ZXInKSk7XHJcbiAgICAgICAgICAgICAgJCgnI3NvY2lhbF9fbGlua19nZycpLmF0dHIoJ2hyZWYnLCBmb3JtRGF0YS5nZXQoJ2dvb2dsZScpKTtcclxuICAgICAgICAgICAgICAkKCcjc29jaWFsX19saW5rX2VtYWlsJykuYXR0cignaHJlZicsIFwibWFpbHRvOlwiK2Zvcm1EYXRhLmdldCgnZW1haWwnKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJChlLnRhcmdldCkucmVtb3ZlQ2xhc3MoJ3Nob3cnKS5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICAkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ2hhcy1vdmVyZmxvdy1oaWRkZW4nKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8g0JTQvtCx0LDQstC70LXQvdC40LUg0LDQu9GM0LHQvtC80LBcclxuICAgICQoJyNmb3JtLWFkZC1hbGJ1bScpLm9uKCdzdWJtaXQnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgkKGUudGFyZ2V0KVswXSk7XHJcbmNvbnNvbGUubG9nKCdhZGQtYWxidW0nKTtcclxuICAgICAgJC5hamF4KHtcclxuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICAgIHVybDogXCIvYWxidW0vc2F2ZVwiLFxyXG4gICAgICAgIGRhdGE6IGZvcm1EYXRhLFxyXG4gICAgICAgIHByb2Nlc3NEYXRhOiBmYWxzZSxcclxuICAgICAgICBjb250ZW50VHlwZTogZmFsc2VcclxuICAgICAgfSlcclxuICAgICAgLmRvbmUoZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKG1zZyk7XHJcbiAgICAgIH0pXHJcbiAgICB9KVxyXG5cclxuICB9XHJcbiAgXHJcbiAgcmV0dXJuIHtcclxuICAgIGluaXQ6IGluaXRcclxuICB9XHJcbn0oKSk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICBpbml0OiBzZXRBamF4UmVzcG9uY2VzLmluaXRcclxufTtcbn0se31dLDM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIEFuaW1hdGUgZWxlbWVudHMgb24gc2Nyb2xsLiBCYXNlZCBvbiB3YXlwb2ludHMuanNcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbnZhciBhbmltYXRlQ3NzID0gZnVuY3Rpb24gKGluX2VmZmVjdCkge1xyXG5cdCQodGhpcykuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdHZhciBlbGVtID0gJCh0aGlzKTtcclxuXHRcdGVsZW0uY3NzKHtvcGFjaXR5OjB9KVxyXG5cdFx0XHQuYWRkQ2xhc3MoXCJhbmltYXRlZFwiKVxyXG5cdFx0XHQud2F5cG9pbnQoZnVuY3Rpb24oZGlyKSB7XHJcblx0XHRcdFx0aWYgKGRpciA9PT0gXCJkb3duXCIpIHtcclxuXHRcdFx0XHRcdGVsZW0uYWRkQ2xhc3MoaW5fZWZmZWN0KS5jc3Moe29wYWNpdHk6MX0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSxcclxuXHRcdFx0e1xyXG5cdFx0XHRcdG9mZnNldDogXCI5MCVcIlxyXG5cdFx0XHR9KTtcclxuXHR9KTtcclxufTtcclxuXHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBTaG93IG93ZXJsYXkgbGF5ZXIgd2hlbiBzcGVjaWZpZWQgbGluayBoYXMgYmVlbiBjbGlja2VkXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbmZ1bmN0aW9uIGZhZGVQYWdlT24gKGxpbmtfc2VsZWN0b3IsIG92ZXJsYXlfc2VsZWN0b3IsIHRpbWUpe1xyXG5cdCQoZG9jdW1lbnQpLm9uKFwiY2xpY2tcIiwgbGlua19zZWxlY3RvciwgZnVuY3Rpb24oZSkge1xyXG5cdFx0dmFyIGhyZWYgPSAkKHRoaXMpLmF0dHIoXCJocmVmXCIpO1xyXG5cdFx0aWYoaHJlZlswXSE9XCIjXCIpe1xyXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG5cdFx0XHRyZXR1cm4gJChvdmVybGF5X3NlbGVjdG9yKVxyXG5cdFx0XHRcdC5mYWRlSW4odGltZSwgZnVuY3Rpb24oKXtcclxuXHRcdFx0XHRcdHJldHVybiBkb2N1bWVudC5sb2NhdGlvbiA9IGhyZWYgIT0gbnVsbCA/IGhyZWYgOiBcIi9cIjtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdH0pO1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcblx0YW5pbWF0ZUNzcyA6IGFuaW1hdGVDc3MsXHJcblx0ZmFkZVBhZ2VPbiA6IGZhZGVQYWdlT25cclxufTtcbn0se31dLDQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuLyoqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gKiAtLS0tLSDQn9C+0LTQutC70Y7Rh9C10L3QuNC1INC/0YDQtdC00L/RgNC+0YHQvNC+0YLRgNCwINGE0L7RgtC+INC4INGE0L7QvdCwIC0tLS0tLS0tXHJcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cclxuXHJcbnZhciBpbWFnZVByZXZpZXcgPSAoZnVuY3Rpb24oKSB7XHJcblxyXG4gIGZ1bmN0aW9uIGluaXQoKSB7XHJcblxyXG4gICAgLy8gQXZhdGFyIHByZXZpZXdcclxuICAgICQoJyNpbnB1dF9hdmF0YXInKS5vbignY2hhbmdlJywgZnVuY3Rpb24oKXtcclxuICAgICAgdmFyIGlucHV0ID0gdGhpcyxcclxuICAgICAgICAgIGF2YXRhciA9ICQoJyNwcmV2aWV3X2F2YXRhcicpO1xyXG5cclxuICAgICAgaWYgKGlucHV0LmZpbGVzICYmIGlucHV0LmZpbGVzWzBdKSB7XHJcbiAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XHJcblxyXG4gICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbihlKXtcclxuICAgICAgICAgIGF2YXRhci5hdHRyKFwic3JjXCIsIGUudGFyZ2V0LnJlc3VsdCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoaW5wdXQuZmlsZXNbMF0pO1xyXG5cclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gQmFja2dyb3VuZCBwcmV2aWV3XHJcbiAgICAkKCcjaW5wdXRfYmFja2dyb3VuZCcpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbigpe1xyXG4gICAgICB2YXIgaW5wdXQgPSB0aGlzLFxyXG4gICAgICAgICAgYmcgPSAkKCcjYmctZWRpdC11c2VyJyk7XHJcblxyXG4gICAgICBpZiAoaW5wdXQuZmlsZXMgJiYgaW5wdXQuZmlsZXNbMF0pIHtcclxuICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcclxuXHJcbiAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgICAgYmcuY3NzKHtcclxuICAgICAgICAgICAgYmFja2dyb3VuZEltYWdlOiBcInVybChcIisgZS50YXJnZXQucmVzdWx0ICtcIilcIlxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoaW5wdXQuZmlsZXNbMF0pO1xyXG5cclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgaW5pdDogaW5pdFxyXG4gIH1cclxufSgpKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gIGluaXQ6IGltYWdlUHJldmlldy5pbml0XHJcbn07XG59LHt9XSw1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbmZ1bmN0aW9uIGluaXQoY29udGFpbmVyLCBvcGVuQnRuLCBjbG9zZUJ0bil7XHJcblx0dmFyIG1vZGFsID0gJChjb250YWluZXIpO1xyXG5cdHZhciBvcGVuID0gJChvcGVuQnRuKTtcclxuXHR2YXIgY2xvc2UgPSBtb2RhbC5maW5kKGNsb3NlQnRuKTtcclxuXHR2YXIgYm9keSA9ICQoJ2JvZHknKTtcclxuXHJcblx0b3Blbi5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKXtcclxuXHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdG1vZGFsLnJlbW92ZUNsYXNzKFwiaGlkZVwiKS5hZGRDbGFzcyhcInNob3dcIik7XHJcblx0XHRib2R5LmFkZENsYXNzKCdoYXMtb3ZlcmZsb3ctaGlkZGVuJyk7XHJcblx0fSk7XHJcblxyXG5cdGNsb3NlLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpe1xyXG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0bW9kYWwuYWRkQ2xhc3MoXCJoaWRlXCIpLnJlbW92ZUNsYXNzKFwic2hvd1wiKTtcclxuXHRcdGJvZHkucmVtb3ZlQ2xhc3MoJ2hhcy1vdmVyZmxvdy1oaWRkZW4nKTtcclxuXHR9KTtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG5cdGluaXQgOiBpbml0XHJcbn07XHJcblxyXG5cbn0se31dLDY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIFByZWxvYWRlciB3aXRoIHBlcmNlbnRhZ2UgYnkgaW1hZ2UgY291bnRcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbnZhclx0cHJlbG9hZGVyX2NvbnRhaW5lciA9ICQoXCIjcHJlbG9hZGVyXCIpLFxyXG5cdHByZWxvYWRlcl9wZXJjZW50YWdlID0gJChcIiNwcmVsb2FkZXJfX3BlcmNlbnRhZ2VcIiksXHJcblx0aGFzSW1hZ2VQcm9wZXJ0aWVzID0gW1wiYmFja2dyb3VuZFwiLCBcImJhY2tncm91bmRJbWFnZVwiLCBcImxpc3RTdHlsZUltYWdlXCIsIFwiYm9yZGVySW1hZ2VcIiwgXCJib3JkZXJDb3JuZXJJbWFnZVwiLCBcImN1cnNvclwiXSxcclxuXHRoYXNJbWFnZUF0dHJpYnV0ZXMgPSBbXCJzcmNzZXRcIl0sXHJcblx0bWF0Y2hfdXJsID0gL3VybFxcKFxccyooWydcIl0/KSguKj8pXFwxXFxzKlxcKS9nLFxyXG5cdGFsbF9pbWFnZXMgPSBbXSxcclxuXHR0b3RhbCA9IDAsXHJcblx0Y291bnQgPSAwO1xyXG5cclxuLy8gQW5pbWF0ZSBpbmNsdWRlZCBTVkcgY2lyY2xlcyBwcmVsb2FkZXJcclxudmFyIGNpcmNsZV9vID0gJChcIiNwcmVsb2FkZXJfX2ltZyAuYmFyX19vdXRlclwiKSxcclxuXHRjaXJjbGVfYyA9ICQoXCIjcHJlbG9hZGVyX19pbWcgLmJhcl9fY2VudGVyXCIpLFxyXG5cdGNpcmNsZV9pID0gJChcIiNwcmVsb2FkZXJfX2ltZyAuYmFyX19pbm5lclwiKSxcclxuXHRsZW5ndGhfbyA9IE1hdGguUEkqKGNpcmNsZV9vLmF0dHIoXCJyXCIpICogMiksXHJcblx0bGVuZ3RoX2MgPSBNYXRoLlBJKihjaXJjbGVfYy5hdHRyKFwiclwiKSAqIDIpLFxyXG5cdGxlbmd0aF9pID0gTWF0aC5QSSooY2lyY2xlX2kuYXR0cihcInJcIikgKiAyKTtcclxuXHJcblxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBwcmVsb2FkZXIoKSB7XHJcblxyXG5cdGZ1bmN0aW9uIGltZ19sb2FkZWQoKXtcclxuXHRcdHZhciBwZXJjZW50YWdlID0gTWF0aC5jZWlsKCAoY291bnQrMSkgLyB0b3RhbCAqIDEwMCApO1xyXG5cclxuXHRcdGNvdW50ICs9IDE7XHJcblx0XHRwZXJjZW50YWdlID0gcGVyY2VudGFnZSA+IDEwMCA/IDEwMCA6IHBlcmNlbnRhZ2U7XHJcblxyXG5cdFx0Ly8gRHJhdyBvZmZzZXRzXHJcblx0XHQvLyAxc3QgY2lyY2xlXHJcblx0XHRjaXJjbGVfby5jc3Moe3N0cm9rZURhc2hvZmZzZXQ6ICgoMTAwLXBlcmNlbnRhZ2UpLzEwMCkqbGVuZ3RoX28gfSk7XHJcblxyXG5cdFx0Ly8gd2hlbiB0byBzdGFydCAybmQgY2lyY2xlXHJcblx0XHRpZihwZXJjZW50YWdlID4gNTApIHtcclxuXHRcdFx0Y2lyY2xlX2MuY3NzKHtzdHJva2VEYXNob2Zmc2V0OiAoKDEwMC1wZXJjZW50YWdlKS8xMDApKmxlbmd0aF9jIH0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIHdoZW4gdG8gc3RhcnQgM3JkIGNpcmNsZVxyXG5cdFx0aWYocGVyY2VudGFnZSA9PSAxMDApIHtcclxuXHRcdFx0Y2lyY2xlX2kuY3NzKHtzdHJva2VEYXNob2Zmc2V0OiAoKDEwMC1wZXJjZW50YWdlKS8xMDApKmxlbmd0aF9pIH0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdHByZWxvYWRlcl9wZXJjZW50YWdlLmh0bWwocGVyY2VudGFnZSk7XHJcblxyXG5cdFx0aWYoY291bnQgPT09IHRvdGFsKXtcclxuXHRcdFx0cmV0dXJuIGRvbmVfbG9hZGluZygpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gZG9uZV9sb2FkaW5nKCl7XHJcblx0XHRwcmVsb2FkZXJfcGVyY2VudGFnZS5jc3Moe1wiYW5pbWF0aW9uXCI6XCJub25lXCJ9KTtcclxuXHRcdHByZWxvYWRlcl9jb250YWluZXIuZGVsYXkoNzAwKS5mYWRlT3V0KDcwMCwgZnVuY3Rpb24oKXtcclxuXHRcdFx0Ly8gQ2FsbGJhY2tzLCBlLmcuOlxyXG5cdFx0XHRwcmVsb2FkZXJfcGVyY2VudGFnZS5yZW1vdmUoKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gaW1hZ2VzX2xvb3AgKHRvdGFsKSB7XHJcblx0XHRmb3IodmFyIGk9MDsgaTx0b3RhbDsgaSsrKXtcclxuXHRcdFx0dmFyIHRlc3RfaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcclxuXHJcblx0XHRcdHRlc3RfaW1hZ2Uub25sb2FkID0gaW1nX2xvYWRlZDtcclxuXHRcdFx0dGVzdF9pbWFnZS5vbmVycm9yID0gaW1nX2xvYWRlZDtcclxuXHJcblx0XHRcdGlmIChhbGxfaW1hZ2VzW2ldLnNyY3NldCkge1xyXG5cdFx0XHRcdHRlc3RfaW1hZ2Uuc3Jjc2V0ID0gYWxsX2ltYWdlc1tpXS5zcmNzZXQ7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRlc3RfaW1hZ2Uuc3JjID0gYWxsX2ltYWdlc1tpXS5zcmM7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvLyBHZXQgYWxsIGltYWdlc1xyXG5cdCQoXCIqXCIpLmVhY2goZnVuY3Rpb24gKCkge1xyXG5cdFx0dmFyIGVsZW1lbnQgPSAkKHRoaXMpO1xyXG5cclxuXHRcdGlmIChlbGVtZW50LmlzKFwiaW1nXCIpICYmIGVsZW1lbnQuYXR0cihcInNyY1wiKSkge1xyXG5cdFx0XHRhbGxfaW1hZ2VzLnB1c2goe1xyXG5cdFx0XHRcdHNyYzogZWxlbWVudC5hdHRyKFwic3JjXCIpLFxyXG5cdFx0XHRcdGVsZW1lbnQ6IGVsZW1lbnRbMF1cclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdFx0JC5lYWNoKGhhc0ltYWdlUHJvcGVydGllcywgZnVuY3Rpb24gKGksIHByb3BlcnR5KSB7XHJcblx0XHRcdHZhciBwcm9wZXJ0eVZhbHVlID0gZWxlbWVudC5jc3MocHJvcGVydHkpO1xyXG5cdFx0XHR2YXIgbWF0Y2g7XHJcblxyXG5cdFx0XHRpZiAoIXByb3BlcnR5VmFsdWUpIHtcclxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0bWF0Y2ggPSBtYXRjaF91cmwuZXhlYyhwcm9wZXJ0eVZhbHVlKTtcclxuXHRcdFx0XHJcblx0XHRcdGlmIChtYXRjaCkge1xyXG5cdFx0XHRcdGFsbF9pbWFnZXMucHVzaCh7XHJcblx0XHRcdFx0XHRzcmM6IG1hdGNoWzJdLFxyXG5cdFx0XHRcdFx0ZWxlbWVudDogZWxlbWVudFswXVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHQkLmVhY2goaGFzSW1hZ2VBdHRyaWJ1dGVzLCBmdW5jdGlvbiAoaSwgYXR0cmlidXRlKSB7XHJcblx0XHRcdHZhciBhdHRyaWJ1dGVWYWx1ZSA9IGVsZW1lbnQuYXR0cihhdHRyaWJ1dGUpO1xyXG5cclxuXHRcdFx0aWYgKCFhdHRyaWJ1dGVWYWx1ZSkge1xyXG5cdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRhbGxfaW1hZ2VzLnB1c2goe1xyXG5cdFx0XHRcdHNyYzogZWxlbWVudC5hdHRyKFwic3JjXCIpLFxyXG5cdFx0XHRcdHNyY3NldDogZWxlbWVudC5hdHRyKFwic3Jjc2V0XCIpLFxyXG5cdFx0XHRcdGVsZW1lbnQ6IGVsZW1lbnRbMF1cclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHR9KTtcclxuXHJcblx0dG90YWwgPSBhbGxfaW1hZ2VzLmxlbmd0aDtcclxuXHJcblx0Ly8gU3RhcnQgcHJlbG9hZGVyIG9yIGV4aXRcclxuXHRpZiAodG90YWwgPT09IDApIHtcclxuXHRcdHByZWxvYWRlcl9wZXJjZW50YWdlLmh0bWwoMTAwKTtcclxuXHRcdGRvbmVfbG9hZGluZygpO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRpbWFnZXNfbG9vcCh0b3RhbCk7XHJcblx0fVxyXG59O1xufSx7fV0sNzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG52YXIgc2xpZGVyO1xyXG52YXIgY3VycmVudDtcclxuXHJcblxyXG5mdW5jdGlvbiBpbml0KGNvbnRhaW5lciwgb3BlbkJ0biwgY2xvc2VCdG4sIG5leHRCdG4sIHByZXZCdG4pe1xyXG5cdFx0XHRzbGlkZXIgPSAkKGNvbnRhaW5lcik7XHJcblx0dmFyIG9wZW4gPSAkKG9wZW5CdG4pO1xyXG5cdHZhciBjbG9zZSA9IHNsaWRlci5maW5kKGNsb3NlQnRuKTtcclxuXHR2YXIgbmV4dCA9IHNsaWRlci5maW5kKG5leHRCdG4pO1xyXG5cdHZhciBwcmV2ID0gc2xpZGVyLmZpbmQocHJldkJ0bik7XHJcblx0dmFyIGJvZHkgPSAkKCdib2R5Jyk7XHJcblxyXG5cdG9wZW4ub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZSl7XHJcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG5cdFx0Y3VycmVudCA9ICQodGhpcykuY2xvc2VzdCgnLmFsYnVtLWl0ZW0nKTtcclxuXHRcdHNob3dTbGlkZShjdXJyZW50KTtcclxuXHJcblx0XHRzbGlkZXIucmVtb3ZlQ2xhc3MoXCJoaWRlXCIpLmFkZENsYXNzKFwic2hvd1wiKTtcclxuXHRcdGJvZHkuYWRkQ2xhc3MoJ2hhcy1vdmVyZmxvdy1oaWRkZW4nKTtcclxuXHR9KTtcclxuXHJcblx0Y2xvc2Uub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZSl7XHJcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRzbGlkZXIuYWRkQ2xhc3MoXCJoaWRlXCIpLnJlbW92ZUNsYXNzKFwic2hvd1wiKTtcclxuXHRcdGJvZHkucmVtb3ZlQ2xhc3MoJ2hhcy1vdmVyZmxvdy1oaWRkZW4nKTtcclxuXHR9KTtcclxuXHJcblx0bmV4dC5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKXtcclxuXHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdHNob3dOZXh0KCk7XHJcblx0fSk7XHJcblxyXG5cdHByZXYub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZSl7XHJcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRzaG93UHJldigpO1xyXG5cdH0pO1xyXG5cclxufTtcclxuXHJcblxyXG5cclxuZnVuY3Rpb24gc2hvd05leHQoKXtcclxuXHRcdHZhciBuZXh0U2xpZGUgPSBjdXJyZW50Lm5leHQoJy5hbGJ1bS1pdGVtJyk7XHJcblx0XHRpZiAobmV4dFNsaWRlLmxlbmd0aCkge1xyXG5cdFx0XHRzaG93U2xpZGUobmV4dFNsaWRlKTtcclxuXHRcdFx0Y3VycmVudCA9IG5leHRTbGlkZTtcclxuXHRcdH1cclxufTtcclxuXHJcbmZ1bmN0aW9uIHNob3dQcmV2KCl7XHJcblx0XHR2YXIgcHJldlNsaWRlID0gY3VycmVudC5wcmV2KCcuYWxidW0taXRlbScpO1xyXG5cdFx0aWYgKHByZXZTbGlkZS5sZW5ndGgpIHtcclxuXHRcdFx0c2hvd1NsaWRlKHByZXZTbGlkZSk7XHJcblx0XHRcdGN1cnJlbnQgPSBwcmV2U2xpZGU7XHJcblx0XHR9XHJcbn07XHJcblxyXG5cclxuZnVuY3Rpb24gc2hvd1NsaWRlKF9pdGVtKXtcclxuXHJcblx0XHR2YXIgaW1nX3RodW1iID0gX2l0ZW0uZGF0YSgndGh1bWInKTtcclxuXHRcdHZhciBpbWdfdGl0bGUgPSBfaXRlbS5kYXRhKCd0aXRsZScpO1xyXG5cdFx0dmFyIGltZ19saWtlcyA9IF9pdGVtLmRhdGEoJ2xpa2VzJyk7XHJcblx0XHR2YXIgaW1nX3VzZXJfbmFtZSA9IF9pdGVtLmRhdGEoJ3VzZXJfbmFtZScpO1xyXG5cdFx0dmFyIGltZ191c2VyX2F2YXRhciA9IF9pdGVtLmRhdGEoJ3VzZXJfYXZhdGFyJyk7XHJcblx0XHR2YXIgaW1nX2Rlc2MgPSBfaXRlbS5kYXRhKCdkZXNjJyk7XHJcblx0XHR2YXIgY29tbWVudHNfaG9sZGVyID0gc2xpZGVyLmZpbmQoJy5jb21tZW50c19faG9sZGVyJyk7XHJcblx0XHR2YXIgaW1nX2NvbW1lbnRzID0gX2l0ZW0uZmluZCgnLmNvbW1lbnRzX19pdGVtJyk7XHJcblxyXG5cclxuXHRcdC8vINC+0YfQuNGJ0LXQvdC40LUg0LHQu9C+0LrQsCDQtNC70Y8g0LrQvtC80LzQtdC90YLQsNGA0LjQtdCyXHJcblx0XHRjb21tZW50c19ob2xkZXIuaHRtbCgnJyk7XHJcblxyXG5cdFx0Ly8g0LTQvtCx0LDQstC70LXQvdC40LUg0LrQvtC80LzQtdC90YLQsNGA0LjQtdCyXHJcblx0XHRpbWdfY29tbWVudHMuZWFjaCggZnVuY3Rpb24oa2V5LCB2YWx1ZSl7XHJcblx0XHRcdGNvbW1lbnRzX2hvbGRlci5hcHBlbmQodmFsdWUpO1xyXG5cdFx0fSk7XHJcblxyXG5cclxuXHJcblx0XHR2YXIgaW1nX2Rlc2MgPSBfaXRlbS5kYXRhKCdkZXNjJyk7XHJcblx0XHR2YXIgaW1nX2Rlc2MgPSBfaXRlbS5kYXRhKCdkZXNjJyk7XHJcblx0XHR2YXIgaW1nX2Rlc2MgPSBfaXRlbS5kYXRhKCdkZXNjJyk7XHJcblxyXG5cdFx0c2xpZGVyLmZpbmQoJy5zbGlkZXJfX2ltZycpLmF0dHIoJ3NyYycsIGltZ190aHVtYik7XHJcblx0XHRzbGlkZXIuZmluZCgnLnNsaWRlcl9fdGl0bGUnKS5odG1sKGltZ190aXRsZSk7XHJcblx0XHRzbGlkZXIuZmluZCgnLmxpa2VzX19jb3VudCcpLmh0bWwoaW1nX2xpa2VzKTtcclxuXHRcdHNsaWRlci5maW5kKCcuc2xpZGVyX190ZXh0JykuaHRtbChpbWdfZGVzYyk7XHJcblx0XHRzbGlkZXIuZmluZCgnLnNsaWRlcl9fYXV0aG9yLW5hbWUnKS5odG1sKGltZ191c2VyX25hbWUpO1xyXG5cdFx0c2xpZGVyLmZpbmQoJy5zbGlkZXJfX2F1dGhvci1waG90byBpbWcnKS5hdHRyKCdzcmMnLCBpbWdfdXNlcl9hdmF0YXIpO1xyXG5cclxuXHJcblxyXG4vLyBoZWlnaHQgYW5pbWF0aW9uXHJcblx0XHR2YXIgc2xpZGVyUGhvdG8gPSAgc2xpZGVyLmZpbmQoJy5zbGlkZXJfX3Bob3RvJyk7XHJcblx0XHR2YXIgc2xpZGVIZWlnaHQgPSBzbGlkZXIuZmluZCgnLnNsaWRlcl9faW1nJykuaGVpZ2h0KCk7XHJcblx0XHRzbGlkZXJQaG90by5hbmltYXRlKHsnaGVpZ2h0Jzogc2xpZGVIZWlnaHR9LCAzMDApO1xyXG5cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcblx0aW5pdCA6IGluaXQsXHJcblx0c2hvd05leHQ6IHNob3dOZXh0LFxyXG5cdHNob3dQcmV2OiBzaG93UHJldlxyXG59O1xyXG5cclxuXG59LHt9XX0se30sWzFdKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
