!function e(t,a,n){function o(i,s){if(!a[i]){if(!t[i]){var l="function"==typeof require&&require;if(!s&&l)return l(i,!0);if(r)return r(i,!0);var d=new Error("Cannot find module '"+i+"'");throw d.code="MODULE_NOT_FOUND",d}var c=a[i]={exports:{}};t[i][0].call(c.exports,function(e){var a=t[i][1][e];return o(a?a:e)},c,c.exports,e,t,a,n)}return a[i].exports}for(var r="function"==typeof require&&require,i=0;i<n.length;i++)o(n[i]);return o}({1:[function(e,t,a){!function(t){"use strict";function a(e){e.preventDefault(),t(".photo-editing").slideUp(300),t(".photo-removing").slideDown(300)}function n(e){e.preventDefault(),t(".photo-removing").slideUp(300),t(".photo-editing").slideDown(300)}function o(e){e.preventDefault();var a=t(this).closest(".social__item");a.siblings().find(".social__form").hide(),a.find(".social__form").show()}function r(e){e.preventDefault(),t(this).closest(".social__form").hide()}var i=e("./modules/preloader.js"),s=e("./modules/modal.js"),l=e("./modules/slider.js"),d=e("./modules/animations.js"),c=e("./modules/ajax.js"),u=e("./modules/image_preview.js");if(t("#scene.axis").length&&t("#scene.axis").parallax({scalarX:3,scalarY:3,frictionX:.5,frictionY:.5}),d.fadePageOn("a.preload-link","#preloader",300),t.fn.animated=d.animateCss,t(".animated-test-container").animated("slideInRight"),t(".js-add-album").length&&s.init("#add-album-modal",".js-add-album",".js-close-modal"),t(".js-add-photos").length&&s.init("#add-photos-modal",".js-add-photos",".js-close-modal"),t(".js-edit-photo").length&&s.init("#edit-photo-modal",".js-edit-photo",".js-close-modal"),t(".js-edit-user").length&&s.init("#edit-user-modal",".js-edit-user",".js-close-modal"),t(".js-edit-user-header").length&&s.init("#edit-user-header",".js-edit-user-header",".js-close-header"),t(".js-edit-album-header").length&&s.init("#edit-album-header",".js-edit-album-header",".js-close-header"),t(".js-show-photo-removing").length>0&&t(".js-show-photo-removing").on("click",a),t(".js-hide-photo-removing").length>0&&t(".js-hide-photo-removing").on("click",n),t(".js-open-slider").length>0&&l.init("#slider",".js-open-slider",".js-close-slider",".js-slider-next",".js-slider-prev"),t(".js-open-social-form").length>0&&t(".js-open-social-form").on("click",o),t(".js-close-form").length>0&&t(".js-close-form").on("click",r),t("#flip-card").click(function(){t("body").addClass("card_flipped")}),t("#unflip-card").click(function(e){e.preventDefault(),t("body").removeClass("card_flipped")}),t("#show-recovery").click(function(e){e.preventDefault(),t("body").addClass("show_recovery")}),t("#hide-recovery").click(function(e){e.preventDefault(),t("body").removeClass("show_recovery")}),t("div#dropzone").length){var f=2;t("div#dropzone").dropzone({url:"/",maxFilesize:f})}i(),c.init(),u.init()}(jQuery)},{"./modules/ajax.js":2,"./modules/animations.js":3,"./modules/image_preview.js":4,"./modules/modal.js":5,"./modules/preloader.js":6,"./modules/slider.js":7}],2:[function(e,t,a){var n=function(){function e(){$("#edit-user-header").on("submit",function(e){e.preventDefault();var t=new FormData($(e.target)[0]);$.ajax({method:"POST",url:"/user/savedata",data:t,processData:!1,contentType:!1}).done(function(a){"success"==a.status&&(void 0!==a.background&&$(".main-page").css({backgroundImage:"url("+a.background+")"}),void 0!==a.avatar&&$("#user-avatar").attr("src",a.avatar),$(".user-info__name").text(t.get("name")),$(".user-info__desc").text(t.get("description")),$("#social__link_vk").attr("href",t.get("vk")),$("#social__link_fb").attr("href",t.get("facebook")),$("#social__link_tw").attr("href",t.get("twitter")),$("#social__link_gg").attr("href",t.get("google")),$("#social__link_email").attr("href","mailto:"+t.get("email"))),$(e.target).removeClass("show").addClass("hide"),$("body").removeClass("has-overflow-hidden")})}),$("#form-add-album").on("submit",function(e){e.preventDefault();var t=new FormData($(e.target)[0]);console.log("add-album"),$.ajax({method:"POST",url:"/album/save",data:t,processData:!1,contentType:!1}).done(function(e){console.log(e)})})}return{init:e}}();t.exports={init:n.init}},{}],3:[function(e,t,a){function n(e,t,a){$(document).on("click",e,function(e){var n=$(this).attr("href");if("#"!=n[0])return e.preventDefault(),$(t).fadeIn(a,function(){return document.location=null!=n?n:"/"})})}var o=function(e){$(this).each(function(){var t=$(this);t.css({opacity:0}).addClass("animated").waypoint(function(a){"down"===a&&t.addClass(e).css({opacity:1})},{offset:"90%"})})};t.exports={animateCss:o,fadePageOn:n}},{}],4:[function(e,t,a){var n=function(){function e(){$("#input_avatar").on("change",function(){var e=this,t=$("#preview_avatar");if(e.files&&e.files[0]){var a=new FileReader;a.onload=function(e){t.attr("src",e.target.result)},a.readAsDataURL(e.files[0])}}),$("#input_background").on("change",function(){var e=this,t=$("#bg-edit-user");if(e.files&&e.files[0]){var a=new FileReader;a.onload=function(e){t.css({backgroundImage:"url("+e.target.result+")"})},a.readAsDataURL(e.files[0])}})}return{init:e}}();t.exports={init:n.init}},{}],5:[function(e,t,a){function n(e,t,a){var n=$(e),o=$(t),r=n.find(a),i=$("body");o.on("click",function(e){e.preventDefault(),n.removeClass("hide").addClass("show"),i.addClass("has-overflow-hidden")}),r.on("click",function(e){e.preventDefault(),n.addClass("hide").removeClass("show"),i.removeClass("has-overflow-hidden")})}t.exports={init:n}},{}],6:[function(e,t,a){var n=$("#preloader"),o=$("#preloader__percentage"),r=["background","backgroundImage","listStyleImage","borderImage","borderCornerImage","cursor"],i=["srcset"],s=/url\(\s*(['"]?)(.*?)\1\s*\)/g,l=[],d=0,c=0,u=$("#preloader__img .bar__outer"),f=$("#preloader__img .bar__center"),h=$("#preloader__img .bar__inner"),m=Math.PI*(2*u.attr("r")),v=Math.PI*(2*f.attr("r")),p=Math.PI*(2*h.attr("r"));t.exports=function(){function e(){var e=Math.ceil((c+1)/d*100);if(c+=1,e=e>100?100:e,u.css({strokeDashoffset:(100-e)/100*m}),e>50&&f.css({strokeDashoffset:(100-e)/100*v}),100==e&&h.css({strokeDashoffset:(100-e)/100*p}),o.html(e),c===d)return t()}function t(){o.css({animation:"none"}),n.delay(700).fadeOut(700,function(){o.remove()})}function a(t){for(var a=0;a<t;a++){var n=new Image;n.onload=e,n.onerror=e,l[a].srcset&&(n.srcset=l[a].srcset),n.src=l[a].src}}$("*").each(function(){var e=$(this);e.is("img")&&e.attr("src")&&l.push({src:e.attr("src"),element:e[0]}),$.each(r,function(t,a){var n,o=e.css(a);return!o||(n=s.exec(o),void(n&&l.push({src:n[2],element:e[0]})))}),$.each(i,function(t,a){var n=e.attr(a);return!n||void l.push({src:e.attr("src"),srcset:e.attr("srcset"),element:e[0]})})}),d=l.length,0===d?(o.html(100),t()):a(d)}},{}],7:[function(e,t,a){function n(e,t,a,n,d){s=$(e);var c=$(t),u=s.find(a),f=s.find(n),h=s.find(d),m=$("body");c.on("click",function(e){e.preventDefault(),l=$(this).closest(".album-item"),i(l),s.removeClass("hide").addClass("show"),m.addClass("has-overflow-hidden")}),u.on("click",function(e){e.preventDefault(),s.addClass("hide").removeClass("show"),m.removeClass("has-overflow-hidden")}),f.on("click",function(e){e.preventDefault(),o()}),h.on("click",function(e){e.preventDefault(),r()})}function o(){var e=l.next(".album-item");e.length&&(i(e),l=e)}function r(){var e=l.prev(".album-item");e.length&&(i(e),l=e)}function i(e){var t=e.data("thumb"),a=e.data("title"),n=e.data("likes"),o=e.data("user_name"),r=e.data("user_avatar"),i=e.data("desc"),l=s.find(".comments__holder"),d=e.find(".comments__item");l.html(""),d.each(function(e,t){l.append(t)});var i=e.data("desc"),i=e.data("desc"),i=e.data("desc");s.find(".slider__img").attr("src",t),s.find(".slider__title").html(a),s.find(".likes__count").html(n),s.find(".slider__text").html(i),s.find(".slider__author-name").html(o),s.find(".slider__author-photo img").attr("src",r);var c=s.find(".slider__photo"),u=s.find(".slider__img").height();c.animate({height:u},300)}var s,l;t.exports={init:n,showNext:o,showPrev:r}},{}]},{},[1]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJlIiwidCIsIm4iLCJyIiwicyIsIm8iLCJ1IiwiYSIsInJlcXVpcmUiLCJpIiwiZiIsIkVycm9yIiwiY29kZSIsImwiLCJleHBvcnRzIiwiY2FsbCIsImxlbmd0aCIsIjEiLCJtb2R1bGUiLCIkIiwic2hvd1Bob3RvUmVtb3ZpbmdCbG9jayIsInByZXZlbnREZWZhdWx0Iiwic2xpZGVVcCIsInNsaWRlRG93biIsImhpZGVQaG90b1JlbW92aW5nQmxvY2siLCJzaG93U29jaWFsRm9ybSIsInNvY2lhbEl0ZW0iLCJ0aGlzIiwiY2xvc2VzdCIsInNpYmxpbmdzIiwiZmluZCIsImhpZGUiLCJzaG93IiwiaGlkZVNvY2lhbEZvcm0iLCJwcmVsb2FkZXIiLCJtb2RhbCIsInNsaWRlciIsImFuaW1hdGlvbnMiLCJzZXRBamF4UmVzcG9uY2UiLCJpbWFnZVByZXZpZXciLCJwYXJhbGxheCIsInNjYWxhclgiLCJzY2FsYXJZIiwiZnJpY3Rpb25YIiwiZnJpY3Rpb25ZIiwiZmFkZVBhZ2VPbiIsImZuIiwiYW5pbWF0ZWQiLCJhbmltYXRlQ3NzIiwiaW5pdCIsIm9uIiwiY2xpY2siLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwibWF4RmlsZVNpemVNYiIsImRyb3B6b25lIiwidXJsIiwibWF4RmlsZXNpemUiLCJqUXVlcnkiLCIuL21vZHVsZXMvYWpheC5qcyIsIi4vbW9kdWxlcy9hbmltYXRpb25zLmpzIiwiLi9tb2R1bGVzL2ltYWdlX3ByZXZpZXcuanMiLCIuL21vZHVsZXMvbW9kYWwuanMiLCIuL21vZHVsZXMvcHJlbG9hZGVyLmpzIiwiLi9tb2R1bGVzL3NsaWRlci5qcyIsIjIiLCJzZXRBamF4UmVzcG9uY2VzIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsInRhcmdldCIsImFqYXgiLCJtZXRob2QiLCJkYXRhIiwicHJvY2Vzc0RhdGEiLCJjb250ZW50VHlwZSIsImRvbmUiLCJtc2ciLCJzdGF0dXMiLCJ1bmRlZmluZWQiLCJiYWNrZ3JvdW5kIiwiY3NzIiwiYmFja2dyb3VuZEltYWdlIiwiYXZhdGFyIiwiYXR0ciIsInRleHQiLCJnZXQiLCJjb25zb2xlIiwibG9nIiwiMyIsImxpbmtfc2VsZWN0b3IiLCJvdmVybGF5X3NlbGVjdG9yIiwidGltZSIsImRvY3VtZW50IiwiaHJlZiIsImZhZGVJbiIsImxvY2F0aW9uIiwiaW5fZWZmZWN0IiwiZWFjaCIsImVsZW0iLCJvcGFjaXR5Iiwid2F5cG9pbnQiLCJkaXIiLCJvZmZzZXQiLCI0IiwiaW5wdXQiLCJmaWxlcyIsInJlYWRlciIsIkZpbGVSZWFkZXIiLCJvbmxvYWQiLCJyZXN1bHQiLCJyZWFkQXNEYXRhVVJMIiwiYmciLCI1IiwiY29udGFpbmVyIiwib3BlbkJ0biIsImNsb3NlQnRuIiwib3BlbiIsImNsb3NlIiwiYm9keSIsIjYiLCJwcmVsb2FkZXJfY29udGFpbmVyIiwicHJlbG9hZGVyX3BlcmNlbnRhZ2UiLCJoYXNJbWFnZVByb3BlcnRpZXMiLCJoYXNJbWFnZUF0dHJpYnV0ZXMiLCJtYXRjaF91cmwiLCJhbGxfaW1hZ2VzIiwidG90YWwiLCJjb3VudCIsImNpcmNsZV9vIiwiY2lyY2xlX2MiLCJjaXJjbGVfaSIsImxlbmd0aF9vIiwiTWF0aCIsIlBJIiwibGVuZ3RoX2MiLCJsZW5ndGhfaSIsImltZ19sb2FkZWQiLCJwZXJjZW50YWdlIiwiY2VpbCIsInN0cm9rZURhc2hvZmZzZXQiLCJodG1sIiwiZG9uZV9sb2FkaW5nIiwiYW5pbWF0aW9uIiwiZGVsYXkiLCJmYWRlT3V0IiwicmVtb3ZlIiwiaW1hZ2VzX2xvb3AiLCJ0ZXN0X2ltYWdlIiwiSW1hZ2UiLCJvbmVycm9yIiwic3Jjc2V0Iiwic3JjIiwiZWxlbWVudCIsImlzIiwicHVzaCIsInByb3BlcnR5IiwibWF0Y2giLCJwcm9wZXJ0eVZhbHVlIiwiZXhlYyIsImF0dHJpYnV0ZSIsImF0dHJpYnV0ZVZhbHVlIiwiNyIsIm5leHRCdG4iLCJwcmV2QnRuIiwibmV4dCIsInByZXYiLCJjdXJyZW50Iiwic2hvd1NsaWRlIiwic2hvd05leHQiLCJzaG93UHJldiIsIm5leHRTbGlkZSIsInByZXZTbGlkZSIsIl9pdGVtIiwiaW1nX3RodW1iIiwiaW1nX3RpdGxlIiwiaW1nX2xpa2VzIiwiaW1nX3VzZXJfbmFtZSIsImltZ191c2VyX2F2YXRhciIsImltZ19kZXNjIiwiY29tbWVudHNfaG9sZGVyIiwiaW1nX2NvbW1lbnRzIiwia2V5IiwidmFsdWUiLCJhcHBlbmQiLCJzbGlkZXJQaG90byIsInNsaWRlSGVpZ2h0IiwiaGVpZ2h0IiwiYW5pbWF0ZSJdLCJtYXBwaW5ncyI6IkNBQUEsUUFBVUEsR0FBRUMsRUFBRUMsRUFBRUMsR0FBRyxRQUFTQyxHQUFFQyxFQUFFQyxHQUFHLElBQUlKLEVBQUVHLEdBQUcsQ0FBQyxJQUFJSixFQUFFSSxHQUFHLENBQUMsR0FBSUUsR0FBa0Isa0JBQVRDLFVBQXFCQSxPQUFRLEtBQUlGLEdBQUdDLEVBQUUsTUFBT0EsR0FBRUYsR0FBRSxFQUFJLElBQUdJLEVBQUUsTUFBT0EsR0FBRUosR0FBRSxFQUFJLElBQUlLLEdBQUUsR0FBSUMsT0FBTSx1QkFBdUJOLEVBQUUsSUFBSyxNQUFNSyxHQUFFRSxLQUFLLG1CQUFtQkYsRUFBRSxHQUFJRyxHQUFFWCxFQUFFRyxJQUFJUyxXQUFZYixHQUFFSSxHQUFHLEdBQUdVLEtBQUtGLEVBQUVDLFFBQVEsU0FBU2QsR0FBRyxHQUFJRSxHQUFFRCxFQUFFSSxHQUFHLEdBQUdMLEVBQUcsT0FBT0ksR0FBRUYsRUFBRUEsRUFBRUYsSUFBSWEsRUFBRUEsRUFBRUMsUUFBUWQsRUFBRUMsRUFBRUMsRUFBRUMsR0FBRyxNQUFPRCxHQUFFRyxHQUFHUyxRQUFrRCxJQUFJLEdBQTFDTCxHQUFrQixrQkFBVEQsVUFBcUJBLFFBQWdCSCxFQUFFLEVBQUVBLEVBQUVGLEVBQUVhLE9BQU9YLElBQUlELEVBQUVELEVBQUVFLEdBQUksT0FBT0QsS0FBS2EsR0FBRyxTQUFTVCxFQUFRVSxFQUFPSixJQUN2ZCxTQUFVSyxHQUNULFlBNEZBLFNBQVNDLEdBQXVCcEIsR0FDL0JBLEVB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cEosRUFBT04sS0FBSyxrQkFDM0IySixFQUFjckosRUFBT04sS0FBSyxnQkFBZ0I0SixRQUM5Q0YsR0FBWUcsU0FBU0QsT0FBVUQsR0FBYyxLQWpHL0MsR0FBSXJKLEdBQ0FrSSxDQW9HSnBKLEdBQU9KLFNBQ05tQyxLQUFPQSxFQUNQdUgsU0FBVUEsRUFDVkMsU0FBVUEsYUFJQSIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSh7MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4oZnVuY3Rpb24oJCkge1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHR2YXIgcHJlbG9hZGVyID0gcmVxdWlyZShcIi4vbW9kdWxlcy9wcmVsb2FkZXIuanNcIiksXG5cdFx0Ly8gaGVscGVycyA9IHJlcXVpcmUoXCIuL21vZHVsZXMvaGVscGVycy5qc1wiKSxcblx0XHRtb2RhbCA9IHJlcXVpcmUoXCIuL21vZHVsZXMvbW9kYWwuanNcIiksXG5cdFx0c2xpZGVyID0gcmVxdWlyZShcIi4vbW9kdWxlcy9zbGlkZXIuanNcIiksXG5cdFx0YW5pbWF0aW9ucyA9IHJlcXVpcmUoXCIuL21vZHVsZXMvYW5pbWF0aW9ucy5qc1wiKSxcblx0XHRzZXRBamF4UmVzcG9uY2UgPSByZXF1aXJlKFwiLi9tb2R1bGVzL2FqYXguanNcIiksXG5cdFx0aW1hZ2VQcmV2aWV3ID0gcmVxdWlyZShcIi4vbW9kdWxlcy9pbWFnZV9wcmV2aWV3LmpzXCIpO1xuXG5cdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHQvLyBBZGFwdGl2ZSBicmVha3BvaW50c1xuXHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0Ly8gdmFyIHNjcm9sbGJhcl93aWR0aCA9IGhlbHBlcnMuZ2V0U2Nyb2xsYmFyV2lkdGgoKSxcblx0Ly8gXHRzY3JlZW5fc2l6ZXMgPSB7XG5cdC8vIFx0XHRtb2JpbGUgOiA0ODAgLSBzY3JvbGxiYXJfd2lkdGgsXG5cdC8vIFx0XHR0YWJsZXQgOiA3NjggLSBzY3JvbGxiYXJfd2lkdGgsXG5cdC8vIFx0XHRsaW1pdCA6IDIwMDAgLSBzY3JvbGxiYXJfd2lkdGhcblx0Ly8gXHR9O1xuXG5cdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHQvLyBQYXJhbGxheFxuXHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuXHQvLyBNYWluIHBhZ2UgbW91c2UgcGFyYWxsYXhcblx0aWYoJChcIiNzY2VuZS5heGlzXCIpLmxlbmd0aCl7XG5cdFx0JChcIiNzY2VuZS5heGlzXCIpLnBhcmFsbGF4KHtcblx0XHRcdHNjYWxhclg6IDMsXG5cdFx0XHRzY2FsYXJZOiAzLFxuXHRcdFx0ZnJpY3Rpb25YOiAwLjUsXG5cdFx0XHRmcmljdGlvblk6IDAuNVxuXHRcdH0pO1xuXHR9XG5cblx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdC8vIEFuaW1hdGlvbnMgZXhhbXBsZVxuXHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0YW5pbWF0aW9ucy5mYWRlUGFnZU9uKFwiYS5wcmVsb2FkLWxpbmtcIiwgXCIjcHJlbG9hZGVyXCIsIDMwMCk7XG5cblx0JC5mbi5hbmltYXRlZCA9IGFuaW1hdGlvbnMuYW5pbWF0ZUNzcztcblx0Ly8gRXhhbXBsZVxuXHQkKFwiLmFuaW1hdGVkLXRlc3QtY29udGFpbmVyXCIpLmFuaW1hdGVkKFwic2xpZGVJblJpZ2h0XCIpO1xuXG5cblxuXHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0Ly8gSW5pdCBBZGQgQWxidW0gTW9kYWxcblx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdGlmICgkKFwiLmpzLWFkZC1hbGJ1bVwiKS5sZW5ndGgpIHtcblx0XHRtb2RhbC5pbml0KFwiI2FkZC1hbGJ1bS1tb2RhbFwiLCBcIi5qcy1hZGQtYWxidW1cIiwgXCIuanMtY2xvc2UtbW9kYWxcIik7XG5cdH1cblxuXHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0Ly8gSW5pdCBBZGQgUGhvdG9zIE1vZGFsXG5cdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHRpZiAoJChcIi5qcy1hZGQtcGhvdG9zXCIpLmxlbmd0aCkge1xuXHRcdG1vZGFsLmluaXQoXCIjYWRkLXBob3Rvcy1tb2RhbFwiLCBcIi5qcy1hZGQtcGhvdG9zXCIsIFwiLmpzLWNsb3NlLW1vZGFsXCIpO1xuXHR9XG5cblx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdC8vIEluaXQgRWRpdCBQaG90byBNb2RhbFxuXHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0aWYgKCQoXCIuanMtZWRpdC1waG90b1wiKS5sZW5ndGgpIHtcblx0XHRtb2RhbC5pbml0KFwiI2VkaXQtcGhvdG8tbW9kYWxcIiwgXCIuanMtZWRpdC1waG90b1wiLCBcIi5qcy1jbG9zZS1tb2RhbFwiKTtcblx0fVxuXG5cdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHQvLyBJbml0IEVkaXQgVXNlciBNb2RhbFxuXHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0aWYgKCQoXCIuanMtZWRpdC11c2VyXCIpLmxlbmd0aCkge1xuXHRcdG1vZGFsLmluaXQoXCIjZWRpdC11c2VyLW1vZGFsXCIsIFwiLmpzLWVkaXQtdXNlclwiLCBcIi5qcy1jbG9zZS1tb2RhbFwiKTtcblx0fVxuXG5cblx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdC8vIEluaXQgRWRpdCBVc2VyIE1vZGFsIChpbiBIZWFkZXIpXG5cdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHRpZiAoJChcIi5qcy1lZGl0LXVzZXItaGVhZGVyXCIpLmxlbmd0aCkge1xuXHRcdG1vZGFsLmluaXQoXCIjZWRpdC11c2VyLWhlYWRlclwiLCBcIi5qcy1lZGl0LXVzZXItaGVhZGVyXCIsIFwiLmpzLWNsb3NlLWhlYWRlclwiKTtcblx0fVxuXG5cdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHQvLyBJbml0IEVkaXQgQWxidW0gTW9kYWwgKGluIEhlYWRlcilcblx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdGlmICgkKFwiLmpzLWVkaXQtYWxidW0taGVhZGVyXCIpLmxlbmd0aCkge1xuXHRcdG1vZGFsLmluaXQoXCIjZWRpdC1hbGJ1bS1oZWFkZXJcIiwgXCIuanMtZWRpdC1hbGJ1bS1oZWFkZXJcIiwgXCIuanMtY2xvc2UtaGVhZGVyXCIpO1xuXHR9XG5cblxuXHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0Ly8gRWRpdCBVc2VyIE1vZGFsIC0gRGVsZXRlIFBob3RvXG5cdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHRmdW5jdGlvbiBzaG93UGhvdG9SZW1vdmluZ0Jsb2NrKGUpIHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0JChcIi5waG90by1lZGl0aW5nXCIpLnNsaWRlVXAoMzAwKTtcblx0XHQkKFwiLnBob3RvLXJlbW92aW5nXCIpLnNsaWRlRG93bigzMDApO1xuXHR9XG5cblx0ZnVuY3Rpb24gaGlkZVBob3RvUmVtb3ZpbmdCbG9jayhlKSB7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdCQoXCIucGhvdG8tcmVtb3ZpbmdcIikuc2xpZGVVcCgzMDApO1xuXHRcdCQoXCIucGhvdG8tZWRpdGluZ1wiKS5zbGlkZURvd24oMzAwKTtcblx0fVxuXG5cdGlmICgkKFwiLmpzLXNob3ctcGhvdG8tcmVtb3ZpbmdcIikubGVuZ3RoID4gMCkge1xuXHRcdCQoXCIuanMtc2hvdy1waG90by1yZW1vdmluZ1wiKS5vbihcImNsaWNrXCIsIHNob3dQaG90b1JlbW92aW5nQmxvY2spO1xuXHR9XG5cblx0aWYgKCQoXCIuanMtaGlkZS1waG90by1yZW1vdmluZ1wiKS5sZW5ndGggPiAwKSB7XG5cdFx0JChcIi5qcy1oaWRlLXBob3RvLXJlbW92aW5nXCIpLm9uKFwiY2xpY2tcIiwgaGlkZVBob3RvUmVtb3ZpbmdCbG9jayk7XG5cdH1cblxuXG5cdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHQvLyBJbml0IEVkaXQgQWxidW0gTW9kYWwgKGluIEhlYWRlcilcblx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdGlmICgkKFwiLmpzLW9wZW4tc2xpZGVyXCIpLmxlbmd0aCA+IDApIHtcblx0XHRzbGlkZXIuaW5pdChcIiNzbGlkZXJcIiwgXCIuanMtb3Blbi1zbGlkZXJcIiwgXCIuanMtY2xvc2Utc2xpZGVyXCIsIFwiLmpzLXNsaWRlci1uZXh0XCIsIFwiLmpzLXNsaWRlci1wcmV2XCIpO1xuXHR9XG5cblxuXG5cblx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdC8vIFNob3cgU29jaWFsIEl0ZW1zIEZvcm1zXG5cdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHRmdW5jdGlvbiBzaG93U29jaWFsRm9ybShlKSB7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdHZhciBzb2NpYWxJdGVtID0gICQodGhpcykuY2xvc2VzdChcIi5zb2NpYWxfX2l0ZW1cIik7XG5cdFx0c29jaWFsSXRlbS5zaWJsaW5ncygpLmZpbmQoXCIuc29jaWFsX19mb3JtXCIpLmhpZGUoKTtcblx0XHRzb2NpYWxJdGVtLmZpbmQoXCIuc29jaWFsX19mb3JtXCIpLnNob3coKTtcblx0fVxuXHRmdW5jdGlvbiBoaWRlU29jaWFsRm9ybShlKSB7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdCQodGhpcykuY2xvc2VzdChcIi5zb2NpYWxfX2Zvcm1cIikuaGlkZSgpO1xuXHR9XG5cblx0aWYgKCQoXCIuanMtb3Blbi1zb2NpYWwtZm9ybVwiKS5sZW5ndGggPiAwKSB7XG5cdFx0JChcIi5qcy1vcGVuLXNvY2lhbC1mb3JtXCIpLm9uKFwiY2xpY2tcIiwgc2hvd1NvY2lhbEZvcm0pO1xuXHR9XG5cdGlmICgkKFwiLmpzLWNsb3NlLWZvcm1cIikubGVuZ3RoID4gMCkge1xuXHRcdCQoXCIuanMtY2xvc2UtZm9ybVwiKS5vbihcImNsaWNrXCIsIGhpZGVTb2NpYWxGb3JtKTtcblx0fVxuXG5cblx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdC8vIExvZ2luIGNhcmQgZmxpcFxuXHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0JChcIiNmbGlwLWNhcmRcIikuY2xpY2soZnVuY3Rpb24oKSB7XG5cdFx0JChcImJvZHlcIikuYWRkQ2xhc3MoXCJjYXJkX2ZsaXBwZWRcIik7XG5cdH0pO1xuXG5cdCQoXCIjdW5mbGlwLWNhcmRcIikuY2xpY2soZnVuY3Rpb24oZSkge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHQkKFwiYm9keVwiKS5yZW1vdmVDbGFzcyhcImNhcmRfZmxpcHBlZFwiKTtcblx0fSk7XG5cblxuXHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0Ly8gTG9naW4gc2hvdyBSZWNvdmVyeSBwYXNzd29yZCBDYXJkXG5cdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHQkKFwiI3Nob3ctcmVjb3ZlcnlcIikuY2xpY2soZnVuY3Rpb24oZSkge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHQkKFwiYm9keVwiKS5hZGRDbGFzcyhcInNob3dfcmVjb3ZlcnlcIik7XG5cdH0pO1xuXG5cdCQoXCIjaGlkZS1yZWNvdmVyeVwiKS5jbGljayhmdW5jdGlvbihlKSB7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdCQoXCJib2R5XCIpLnJlbW92ZUNsYXNzKFwic2hvd19yZWNvdmVyeVwiKTtcblx0fSk7XG5cblx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdC8vIERyb3B6b25lIChBZGQgcGhvdG9zKVxuXHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuXHRpZiAoJChcImRpdiNkcm9wem9uZVwiKS5sZW5ndGgpIHtcblxuXHRcdHZhciBtYXhGaWxlU2l6ZU1iID0gMjtcblxuXHRcdCQoXCJkaXYjZHJvcHpvbmVcIikuZHJvcHpvbmUoe1xuXHRcdCB1cmw6IFwiL1wiICxcblx0XHQgbWF4RmlsZXNpemU6IG1heEZpbGVTaXplTWJcblx0XHR9KTtcblx0fVxuXG5cblx0cHJlbG9hZGVyKCk7XG5cblx0c2V0QWpheFJlc3BvbmNlLmluaXQoKTtcblx0aW1hZ2VQcmV2aWV3LmluaXQoKTtcblxufSkoalF1ZXJ5KTtcbn0se1wiLi9tb2R1bGVzL2FqYXguanNcIjoyLFwiLi9tb2R1bGVzL2FuaW1hdGlvbnMuanNcIjozLFwiLi9tb2R1bGVzL2ltYWdlX3ByZXZpZXcuanNcIjo0LFwiLi9tb2R1bGVzL21vZGFsLmpzXCI6NSxcIi4vbW9kdWxlcy9wcmVsb2FkZXIuanNcIjo2LFwiLi9tb2R1bGVzL3NsaWRlci5qc1wiOjd9XSwyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbi8qKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiogLS0tLS0g0KPRgdGC0LDQvdC+0LLQutCwIGFqYXgt0LfQsNC/0YDQvtGB0L7QsiAtLS0tLS0tLVxuKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuXG52YXIgc2V0QWpheFJlc3BvbmNlcyA9IChmdW5jdGlvbigpIHtcblxuICBmdW5jdGlvbiBpbml0KCkge1xuXG4gICAgLy8g0KDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjQtSDQtNCw0L3QvdGL0YUg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXG4gICAgJCgnI2VkaXQtdXNlci1oZWFkZXInKS5vbignc3VibWl0JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgkKGUudGFyZ2V0KVswXSk7XG5cbiAgICAgICQuYWpheCh7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgdXJsOiBcIi91c2VyL3NhdmVkYXRhXCIsXG4gICAgICAgICAgICBkYXRhOiBmb3JtRGF0YSxcbiAgICAgICAgICAgIHByb2Nlc3NEYXRhOiBmYWxzZSxcbiAgICAgICAgICAgIGNvbnRlbnRUeXBlOiBmYWxzZVxuICAgICAgICAgIH0pXG4gICAgICAgICAgLmRvbmUoZnVuY3Rpb24gKG1zZykge1xuLy8gY29uc29sZS5sb2cobXNnKTtcblxuICAgICAgICAgICAgaWYobXNnLnN0YXR1cyA9PSAnc3VjY2VzcycpIHtcbiAgICAgICAgICAgICAgaWYobXNnLmJhY2tncm91bmQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICQoJy5tYWluLXBhZ2UnKS5jc3Moe1xuICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZEltYWdlOiBcInVybChcIittc2cuYmFja2dyb3VuZCtcIilcIlxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmKG1zZy5hdmF0YXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICQoJyN1c2VyLWF2YXRhcicpLmF0dHIoJ3NyYycsIG1zZy5hdmF0YXIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICQoJy51c2VyLWluZm9fX25hbWUnKS50ZXh0KGZvcm1EYXRhLmdldCgnbmFtZScpKTtcbiAgICAgICAgICAgICAgJCgnLnVzZXItaW5mb19fZGVzYycpLnRleHQoZm9ybURhdGEuZ2V0KCdkZXNjcmlwdGlvbicpKTtcbiAgICAgICAgICAgICAgJCgnI3NvY2lhbF9fbGlua192aycpLmF0dHIoJ2hyZWYnLCBmb3JtRGF0YS5nZXQoJ3ZrJykpO1xuICAgICAgICAgICAgICAkKCcjc29jaWFsX19saW5rX2ZiJykuYXR0cignaHJlZicsIGZvcm1EYXRhLmdldCgnZmFjZWJvb2snKSk7XG4gICAgICAgICAgICAgICQoJyNzb2NpYWxfX2xpbmtfdHcnKS5hdHRyKCdocmVmJywgZm9ybURhdGEuZ2V0KCd0d2l0dGVyJykpO1xuICAgICAgICAgICAgICAkKCcjc29jaWFsX19saW5rX2dnJykuYXR0cignaHJlZicsIGZvcm1EYXRhLmdldCgnZ29vZ2xlJykpO1xuICAgICAgICAgICAgICAkKCcjc29jaWFsX19saW5rX2VtYWlsJykuYXR0cignaHJlZicsIFwibWFpbHRvOlwiK2Zvcm1EYXRhLmdldCgnZW1haWwnKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkKGUudGFyZ2V0KS5yZW1vdmVDbGFzcygnc2hvdycpLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgICAgICAgICAkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ2hhcy1vdmVyZmxvdy1oaWRkZW4nKTtcbiAgICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vINCU0L7QsdCw0LLQu9C10L3QuNC1INCw0LvRjNCx0L7QvNCwXG4gICAgJCgnI2Zvcm0tYWRkLWFsYnVtJykub24oJ3N1Ym1pdCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoJChlLnRhcmdldClbMF0pO1xuY29uc29sZS5sb2coJ2FkZC1hbGJ1bScpO1xuICAgICAgJC5hamF4KHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgdXJsOiBcIi9hbGJ1bS9zYXZlXCIsXG4gICAgICAgIGRhdGE6IGZvcm1EYXRhLFxuICAgICAgICBwcm9jZXNzRGF0YTogZmFsc2UsXG4gICAgICAgIGNvbnRlbnRUeXBlOiBmYWxzZVxuICAgICAgfSlcbiAgICAgIC5kb25lKGZ1bmN0aW9uIChtc2cpIHtcbiAgICAgICAgY29uc29sZS5sb2cobXNnKTtcbiAgICAgIH0pXG4gICAgfSlcblxuICB9XG4gIFxuICByZXR1cm4ge1xuICAgIGluaXQ6IGluaXRcbiAgfVxufSgpKTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGluaXQ6IHNldEFqYXhSZXNwb25jZXMuaW5pdFxufTtcbn0se31dLDM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBBbmltYXRlIGVsZW1lbnRzIG9uIHNjcm9sbC4gQmFzZWQgb24gd2F5cG9pbnRzLmpzXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbnZhciBhbmltYXRlQ3NzID0gZnVuY3Rpb24gKGluX2VmZmVjdCkge1xuXHQkKHRoaXMpLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGVsZW0gPSAkKHRoaXMpO1xuXHRcdGVsZW0uY3NzKHtvcGFjaXR5OjB9KVxuXHRcdFx0LmFkZENsYXNzKFwiYW5pbWF0ZWRcIilcblx0XHRcdC53YXlwb2ludChmdW5jdGlvbihkaXIpIHtcblx0XHRcdFx0aWYgKGRpciA9PT0gXCJkb3duXCIpIHtcblx0XHRcdFx0XHRlbGVtLmFkZENsYXNzKGluX2VmZmVjdCkuY3NzKHtvcGFjaXR5OjF9KTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdHtcblx0XHRcdFx0b2Zmc2V0OiBcIjkwJVwiXG5cdFx0XHR9KTtcblx0fSk7XG59O1xuXG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBTaG93IG93ZXJsYXkgbGF5ZXIgd2hlbiBzcGVjaWZpZWQgbGluayBoYXMgYmVlbiBjbGlja2VkXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuZnVuY3Rpb24gZmFkZVBhZ2VPbiAobGlua19zZWxlY3Rvciwgb3ZlcmxheV9zZWxlY3RvciwgdGltZSl7XG5cdCQoZG9jdW1lbnQpLm9uKFwiY2xpY2tcIiwgbGlua19zZWxlY3RvciwgZnVuY3Rpb24oZSkge1xuXHRcdHZhciBocmVmID0gJCh0aGlzKS5hdHRyKFwiaHJlZlwiKTtcblx0XHRpZihocmVmWzBdIT1cIiNcIil7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHRcdHJldHVybiAkKG92ZXJsYXlfc2VsZWN0b3IpXG5cdFx0XHRcdC5mYWRlSW4odGltZSwgZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRyZXR1cm4gZG9jdW1lbnQubG9jYXRpb24gPSBocmVmICE9IG51bGwgPyBocmVmIDogXCIvXCI7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHR9KTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuXHRhbmltYXRlQ3NzIDogYW5pbWF0ZUNzcyxcblx0ZmFkZVBhZ2VPbiA6IGZhZGVQYWdlT25cbn07XG59LHt9XSw0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbi8qKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIC0tLS0tINCf0L7QtNC60LvRjtGH0LXQvdC40LUg0L/RgNC10LTQv9GA0L7RgdC80L7RgtGA0LAg0YTQvtGC0L4g0Lgg0YTQvtC90LAgLS0tLS0tLS1cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cblxudmFyIGltYWdlUHJldmlldyA9IChmdW5jdGlvbigpIHtcblxuICBmdW5jdGlvbiBpbml0KCkge1xuXG4gICAgLy8gQXZhdGFyIHByZXZpZXdcbiAgICAkKCcjaW5wdXRfYXZhdGFyJykub24oJ2NoYW5nZScsIGZ1bmN0aW9uKCl7XG4gICAgICB2YXIgaW5wdXQgPSB0aGlzLFxuICAgICAgICAgIGF2YXRhciA9ICQoJyNwcmV2aWV3X2F2YXRhcicpO1xuXG4gICAgICBpZiAoaW5wdXQuZmlsZXMgJiYgaW5wdXQuZmlsZXNbMF0pIHtcbiAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG5cbiAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKGUpe1xuICAgICAgICAgIGF2YXRhci5hdHRyKFwic3JjXCIsIGUudGFyZ2V0LnJlc3VsdCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoaW5wdXQuZmlsZXNbMF0pO1xuXG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBCYWNrZ3JvdW5kIHByZXZpZXdcbiAgICAkKCcjaW5wdXRfYmFja2dyb3VuZCcpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbigpe1xuICAgICAgdmFyIGlucHV0ID0gdGhpcyxcbiAgICAgICAgICBiZyA9ICQoJyNiZy1lZGl0LXVzZXInKTtcblxuICAgICAgaWYgKGlucHV0LmZpbGVzICYmIGlucHV0LmZpbGVzWzBdKSB7XG4gICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuXG4gICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbihlKXtcbiAgICAgICAgICBiZy5jc3Moe1xuICAgICAgICAgICAgYmFja2dyb3VuZEltYWdlOiBcInVybChcIisgZS50YXJnZXQucmVzdWx0ICtcIilcIlxuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGlucHV0LmZpbGVzWzBdKTtcblxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBpbml0OiBpbml0XG4gIH1cbn0oKSk7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBpbml0OiBpbWFnZVByZXZpZXcuaW5pdFxufTtcbn0se31dLDU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuZnVuY3Rpb24gaW5pdChjb250YWluZXIsIG9wZW5CdG4sIGNsb3NlQnRuKXtcblx0dmFyIG1vZGFsID0gJChjb250YWluZXIpO1xuXHR2YXIgb3BlbiA9ICQob3BlbkJ0bik7XG5cdHZhciBjbG9zZSA9IG1vZGFsLmZpbmQoY2xvc2VCdG4pO1xuXHR2YXIgYm9keSA9ICQoJ2JvZHknKTtcblxuXHRvcGVuLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpe1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRtb2RhbC5yZW1vdmVDbGFzcyhcImhpZGVcIikuYWRkQ2xhc3MoXCJzaG93XCIpO1xuXHRcdGJvZHkuYWRkQ2xhc3MoJ2hhcy1vdmVyZmxvdy1oaWRkZW4nKTtcblx0fSk7XG5cblx0Y2xvc2Uub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZSl7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdG1vZGFsLmFkZENsYXNzKFwiaGlkZVwiKS5yZW1vdmVDbGFzcyhcInNob3dcIik7XG5cdFx0Ym9keS5yZW1vdmVDbGFzcygnaGFzLW92ZXJmbG93LWhpZGRlbicpO1xuXHR9KTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuXHRpbml0IDogaW5pdFxufTtcblxuXG59LHt9XSw2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gUHJlbG9hZGVyIHdpdGggcGVyY2VudGFnZSBieSBpbWFnZSBjb3VudFxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG52YXJcdHByZWxvYWRlcl9jb250YWluZXIgPSAkKFwiI3ByZWxvYWRlclwiKSxcblx0cHJlbG9hZGVyX3BlcmNlbnRhZ2UgPSAkKFwiI3ByZWxvYWRlcl9fcGVyY2VudGFnZVwiKSxcblx0aGFzSW1hZ2VQcm9wZXJ0aWVzID0gW1wiYmFja2dyb3VuZFwiLCBcImJhY2tncm91bmRJbWFnZVwiLCBcImxpc3RTdHlsZUltYWdlXCIsIFwiYm9yZGVySW1hZ2VcIiwgXCJib3JkZXJDb3JuZXJJbWFnZVwiLCBcImN1cnNvclwiXSxcblx0aGFzSW1hZ2VBdHRyaWJ1dGVzID0gW1wic3Jjc2V0XCJdLFxuXHRtYXRjaF91cmwgPSAvdXJsXFwoXFxzKihbJ1wiXT8pKC4qPylcXDFcXHMqXFwpL2csXG5cdGFsbF9pbWFnZXMgPSBbXSxcblx0dG90YWwgPSAwLFxuXHRjb3VudCA9IDA7XG5cbi8vIEFuaW1hdGUgaW5jbHVkZWQgU1ZHIGNpcmNsZXMgcHJlbG9hZGVyXG52YXIgY2lyY2xlX28gPSAkKFwiI3ByZWxvYWRlcl9faW1nIC5iYXJfX291dGVyXCIpLFxuXHRjaXJjbGVfYyA9ICQoXCIjcHJlbG9hZGVyX19pbWcgLmJhcl9fY2VudGVyXCIpLFxuXHRjaXJjbGVfaSA9ICQoXCIjcHJlbG9hZGVyX19pbWcgLmJhcl9faW5uZXJcIiksXG5cdGxlbmd0aF9vID0gTWF0aC5QSSooY2lyY2xlX28uYXR0cihcInJcIikgKiAyKSxcblx0bGVuZ3RoX2MgPSBNYXRoLlBJKihjaXJjbGVfYy5hdHRyKFwiclwiKSAqIDIpLFxuXHRsZW5ndGhfaSA9IE1hdGguUEkqKGNpcmNsZV9pLmF0dHIoXCJyXCIpICogMik7XG5cblxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHByZWxvYWRlcigpIHtcblxuXHRmdW5jdGlvbiBpbWdfbG9hZGVkKCl7XG5cdFx0dmFyIHBlcmNlbnRhZ2UgPSBNYXRoLmNlaWwoIChjb3VudCsxKSAvIHRvdGFsICogMTAwICk7XG5cblx0XHRjb3VudCArPSAxO1xuXHRcdHBlcmNlbnRhZ2UgPSBwZXJjZW50YWdlID4gMTAwID8gMTAwIDogcGVyY2VudGFnZTtcblxuXHRcdC8vIERyYXcgb2Zmc2V0c1xuXHRcdC8vIDFzdCBjaXJjbGVcblx0XHRjaXJjbGVfby5jc3Moe3N0cm9rZURhc2hvZmZzZXQ6ICgoMTAwLXBlcmNlbnRhZ2UpLzEwMCkqbGVuZ3RoX28gfSk7XG5cblx0XHQvLyB3aGVuIHRvIHN0YXJ0IDJuZCBjaXJjbGVcblx0XHRpZihwZXJjZW50YWdlID4gNTApIHtcblx0XHRcdGNpcmNsZV9jLmNzcyh7c3Ryb2tlRGFzaG9mZnNldDogKCgxMDAtcGVyY2VudGFnZSkvMTAwKSpsZW5ndGhfYyB9KTtcblx0XHR9XG5cblx0XHQvLyB3aGVuIHRvIHN0YXJ0IDNyZCBjaXJjbGVcblx0XHRpZihwZXJjZW50YWdlID09IDEwMCkge1xuXHRcdFx0Y2lyY2xlX2kuY3NzKHtzdHJva2VEYXNob2Zmc2V0OiAoKDEwMC1wZXJjZW50YWdlKS8xMDApKmxlbmd0aF9pIH0pO1xuXHRcdH1cblxuXHRcdHByZWxvYWRlcl9wZXJjZW50YWdlLmh0bWwocGVyY2VudGFnZSk7XG5cblx0XHRpZihjb3VudCA9PT0gdG90YWwpe1xuXHRcdFx0cmV0dXJuIGRvbmVfbG9hZGluZygpO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIGRvbmVfbG9hZGluZygpe1xuXHRcdHByZWxvYWRlcl9wZXJjZW50YWdlLmNzcyh7XCJhbmltYXRpb25cIjpcIm5vbmVcIn0pO1xuXHRcdHByZWxvYWRlcl9jb250YWluZXIuZGVsYXkoNzAwKS5mYWRlT3V0KDcwMCwgZnVuY3Rpb24oKXtcblx0XHRcdC8vIENhbGxiYWNrcywgZS5nLjpcblx0XHRcdHByZWxvYWRlcl9wZXJjZW50YWdlLnJlbW92ZSgpO1xuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gaW1hZ2VzX2xvb3AgKHRvdGFsKSB7XG5cdFx0Zm9yKHZhciBpPTA7IGk8dG90YWw7IGkrKyl7XG5cdFx0XHR2YXIgdGVzdF9pbWFnZSA9IG5ldyBJbWFnZSgpO1xuXG5cdFx0XHR0ZXN0X2ltYWdlLm9ubG9hZCA9IGltZ19sb2FkZWQ7XG5cdFx0XHR0ZXN0X2ltYWdlLm9uZXJyb3IgPSBpbWdfbG9hZGVkO1xuXG5cdFx0XHRpZiAoYWxsX2ltYWdlc1tpXS5zcmNzZXQpIHtcblx0XHRcdFx0dGVzdF9pbWFnZS5zcmNzZXQgPSBhbGxfaW1hZ2VzW2ldLnNyY3NldDtcblx0XHRcdH1cblxuXHRcdFx0dGVzdF9pbWFnZS5zcmMgPSBhbGxfaW1hZ2VzW2ldLnNyYztcblx0XHR9XG5cdH1cblxuXHQvLyBHZXQgYWxsIGltYWdlc1xuXHQkKFwiKlwiKS5lYWNoKGZ1bmN0aW9uICgpIHtcblx0XHR2YXIgZWxlbWVudCA9ICQodGhpcyk7XG5cblx0XHRpZiAoZWxlbWVudC5pcyhcImltZ1wiKSAmJiBlbGVtZW50LmF0dHIoXCJzcmNcIikpIHtcblx0XHRcdGFsbF9pbWFnZXMucHVzaCh7XG5cdFx0XHRcdHNyYzogZWxlbWVudC5hdHRyKFwic3JjXCIpLFxuXHRcdFx0XHRlbGVtZW50OiBlbGVtZW50WzBdXG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHQkLmVhY2goaGFzSW1hZ2VQcm9wZXJ0aWVzLCBmdW5jdGlvbiAoaSwgcHJvcGVydHkpIHtcblx0XHRcdHZhciBwcm9wZXJ0eVZhbHVlID0gZWxlbWVudC5jc3MocHJvcGVydHkpO1xuXHRcdFx0dmFyIG1hdGNoO1xuXG5cdFx0XHRpZiAoIXByb3BlcnR5VmFsdWUpIHtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cblx0XHRcdG1hdGNoID0gbWF0Y2hfdXJsLmV4ZWMocHJvcGVydHlWYWx1ZSk7XG5cdFx0XHRcblx0XHRcdGlmIChtYXRjaCkge1xuXHRcdFx0XHRhbGxfaW1hZ2VzLnB1c2goe1xuXHRcdFx0XHRcdHNyYzogbWF0Y2hbMl0sXG5cdFx0XHRcdFx0ZWxlbWVudDogZWxlbWVudFswXVxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdCQuZWFjaChoYXNJbWFnZUF0dHJpYnV0ZXMsIGZ1bmN0aW9uIChpLCBhdHRyaWJ1dGUpIHtcblx0XHRcdHZhciBhdHRyaWJ1dGVWYWx1ZSA9IGVsZW1lbnQuYXR0cihhdHRyaWJ1dGUpO1xuXG5cdFx0XHRpZiAoIWF0dHJpYnV0ZVZhbHVlKSB7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXG5cdFx0XHRhbGxfaW1hZ2VzLnB1c2goe1xuXHRcdFx0XHRzcmM6IGVsZW1lbnQuYXR0cihcInNyY1wiKSxcblx0XHRcdFx0c3Jjc2V0OiBlbGVtZW50LmF0dHIoXCJzcmNzZXRcIiksXG5cdFx0XHRcdGVsZW1lbnQ6IGVsZW1lbnRbMF1cblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9KTtcblxuXHR0b3RhbCA9IGFsbF9pbWFnZXMubGVuZ3RoO1xuXG5cdC8vIFN0YXJ0IHByZWxvYWRlciBvciBleGl0XG5cdGlmICh0b3RhbCA9PT0gMCkge1xuXHRcdHByZWxvYWRlcl9wZXJjZW50YWdlLmh0bWwoMTAwKTtcblx0XHRkb25lX2xvYWRpbmcoKTtcblx0fSBlbHNlIHtcblx0XHRpbWFnZXNfbG9vcCh0b3RhbCk7XG5cdH1cbn07XG59LHt9XSw3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbnZhciBzbGlkZXI7XG52YXIgY3VycmVudDtcblxuXG5mdW5jdGlvbiBpbml0KGNvbnRhaW5lciwgb3BlbkJ0biwgY2xvc2VCdG4sIG5leHRCdG4sIHByZXZCdG4pe1xuXHRcdFx0c2xpZGVyID0gJChjb250YWluZXIpO1xuXHR2YXIgb3BlbiA9ICQob3BlbkJ0bik7XG5cdHZhciBjbG9zZSA9IHNsaWRlci5maW5kKGNsb3NlQnRuKTtcblx0dmFyIG5leHQgPSBzbGlkZXIuZmluZChuZXh0QnRuKTtcblx0dmFyIHByZXYgPSBzbGlkZXIuZmluZChwcmV2QnRuKTtcblx0dmFyIGJvZHkgPSAkKCdib2R5Jyk7XG5cblx0b3Blbi5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKXtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHRjdXJyZW50ID0gJCh0aGlzKS5jbG9zZXN0KCcuYWxidW0taXRlbScpO1xuXHRcdHNob3dTbGlkZShjdXJyZW50KTtcblxuXHRcdHNsaWRlci5yZW1vdmVDbGFzcyhcImhpZGVcIikuYWRkQ2xhc3MoXCJzaG93XCIpO1xuXHRcdGJvZHkuYWRkQ2xhc3MoJ2hhcy1vdmVyZmxvdy1oaWRkZW4nKTtcblx0fSk7XG5cblx0Y2xvc2Uub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZSl7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdHNsaWRlci5hZGRDbGFzcyhcImhpZGVcIikucmVtb3ZlQ2xhc3MoXCJzaG93XCIpO1xuXHRcdGJvZHkucmVtb3ZlQ2xhc3MoJ2hhcy1vdmVyZmxvdy1oaWRkZW4nKTtcblx0fSk7XG5cblx0bmV4dC5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKXtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0c2hvd05leHQoKTtcblx0fSk7XG5cblx0cHJldi5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKXtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0c2hvd1ByZXYoKTtcblx0fSk7XG5cbn07XG5cblxuXG5mdW5jdGlvbiBzaG93TmV4dCgpe1xuXHRcdHZhciBuZXh0U2xpZGUgPSBjdXJyZW50Lm5leHQoJy5hbGJ1bS1pdGVtJyk7XG5cdFx0aWYgKG5leHRTbGlkZS5sZW5ndGgpIHtcblx0XHRcdHNob3dTbGlkZShuZXh0U2xpZGUpO1xuXHRcdFx0Y3VycmVudCA9IG5leHRTbGlkZTtcblx0XHR9XG59O1xuXG5mdW5jdGlvbiBzaG93UHJldigpe1xuXHRcdHZhciBwcmV2U2xpZGUgPSBjdXJyZW50LnByZXYoJy5hbGJ1bS1pdGVtJyk7XG5cdFx0aWYgKHByZXZTbGlkZS5sZW5ndGgpIHtcblx0XHRcdHNob3dTbGlkZShwcmV2U2xpZGUpO1xuXHRcdFx0Y3VycmVudCA9IHByZXZTbGlkZTtcblx0XHR9XG59O1xuXG5cbmZ1bmN0aW9uIHNob3dTbGlkZShfaXRlbSl7XG5cblx0XHR2YXIgaW1nX3RodW1iID0gX2l0ZW0uZGF0YSgndGh1bWInKTtcblx0XHR2YXIgaW1nX3RpdGxlID0gX2l0ZW0uZGF0YSgndGl0bGUnKTtcblx0XHR2YXIgaW1nX2xpa2VzID0gX2l0ZW0uZGF0YSgnbGlrZXMnKTtcblx0XHR2YXIgaW1nX3VzZXJfbmFtZSA9IF9pdGVtLmRhdGEoJ3VzZXJfbmFtZScpO1xuXHRcdHZhciBpbWdfdXNlcl9hdmF0YXIgPSBfaXRlbS5kYXRhKCd1c2VyX2F2YXRhcicpO1xuXHRcdHZhciBpbWdfZGVzYyA9IF9pdGVtLmRhdGEoJ2Rlc2MnKTtcblx0XHR2YXIgY29tbWVudHNfaG9sZGVyID0gc2xpZGVyLmZpbmQoJy5jb21tZW50c19faG9sZGVyJyk7XG5cdFx0dmFyIGltZ19jb21tZW50cyA9IF9pdGVtLmZpbmQoJy5jb21tZW50c19faXRlbScpO1xuXG5cblx0XHQvLyDQvtGH0LjRidC10L3QuNC1INCx0LvQvtC60LAg0LTQu9GPINC60L7QvNC80LXQvdGC0LDRgNC40LXQslxuXHRcdGNvbW1lbnRzX2hvbGRlci5odG1sKCcnKTtcblxuXHRcdC8vINC00L7QsdCw0LLQu9C10L3QuNC1INC60L7QvNC80LXQvdGC0LDRgNC40LXQslxuXHRcdGltZ19jb21tZW50cy5lYWNoKCBmdW5jdGlvbihrZXksIHZhbHVlKXtcblx0XHRcdGNvbW1lbnRzX2hvbGRlci5hcHBlbmQodmFsdWUpO1xuXHRcdH0pO1xuXG5cblxuXHRcdHZhciBpbWdfZGVzYyA9IF9pdGVtLmRhdGEoJ2Rlc2MnKTtcblx0XHR2YXIgaW1nX2Rlc2MgPSBfaXRlbS5kYXRhKCdkZXNjJyk7XG5cdFx0dmFyIGltZ19kZXNjID0gX2l0ZW0uZGF0YSgnZGVzYycpO1xuXG5cdFx0c2xpZGVyLmZpbmQoJy5zbGlkZXJfX2ltZycpLmF0dHIoJ3NyYycsIGltZ190aHVtYik7XG5cdFx0c2xpZGVyLmZpbmQoJy5zbGlkZXJfX3RpdGxlJykuaHRtbChpbWdfdGl0bGUpO1xuXHRcdHNsaWRlci5maW5kKCcubGlrZXNfX2NvdW50JykuaHRtbChpbWdfbGlrZXMpO1xuXHRcdHNsaWRlci5maW5kKCcuc2xpZGVyX190ZXh0JykuaHRtbChpbWdfZGVzYyk7XG5cdFx0c2xpZGVyLmZpbmQoJy5zbGlkZXJfX2F1dGhvci1uYW1lJykuaHRtbChpbWdfdXNlcl9uYW1lKTtcblx0XHRzbGlkZXIuZmluZCgnLnNsaWRlcl9fYXV0aG9yLXBob3RvIGltZycpLmF0dHIoJ3NyYycsIGltZ191c2VyX2F2YXRhcik7XG5cblxuXG4vLyBoZWlnaHQgYW5pbWF0aW9uXG5cdFx0dmFyIHNsaWRlclBob3RvID0gIHNsaWRlci5maW5kKCcuc2xpZGVyX19waG90bycpO1xuXHRcdHZhciBzbGlkZUhlaWdodCA9IHNsaWRlci5maW5kKCcuc2xpZGVyX19pbWcnKS5oZWlnaHQoKTtcblx0XHRzbGlkZXJQaG90by5hbmltYXRlKHsnaGVpZ2h0Jzogc2xpZGVIZWlnaHR9LCAzMDApO1xuXG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuXHRpbml0IDogaW5pdCxcblx0c2hvd05leHQ6IHNob3dOZXh0LFxuXHRzaG93UHJldjogc2hvd1ByZXZcbn07XG5cblxufSx7fV19LHt9LFsxXSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
