!function e(t,a,n){function o(i,s){if(!a[i]){if(!t[i]){var l="function"==typeof require&&require;if(!s&&l)return l(i,!0);if(r)return r(i,!0);var d=new Error("Cannot find module '"+i+"'");throw d.code="MODULE_NOT_FOUND",d}var c=a[i]={exports:{}};t[i][0].call(c.exports,function(e){var a=t[i][1][e];return o(a?a:e)},c,c.exports,e,t,a,n)}return a[i].exports}for(var r="function"==typeof require&&require,i=0;i<n.length;i++)o(n[i]);return o}({1:[function(e,t,a){!function(t){"use strict";function a(e){e.preventDefault(),t(".photo-editing").slideUp(300),t(".photo-removing").slideDown(300)}function n(e){e.preventDefault(),t(".photo-removing").slideUp(300),t(".photo-editing").slideDown(300)}function o(e){e.preventDefault();var a=t(this).closest(".social__item");a.siblings().find(".social__form").hide(),a.find(".social__form").show()}function r(e){e.preventDefault(),t(this).closest(".social__form").hide()}var i=e("./modules/preloader.js"),s=e("./modules/modal.js"),l=e("./modules/slider.js"),d=e("./modules/animations.js"),c=e("./modules/ajax.js"),u=e("./modules/image_preview.js");if(t("#scene.axis").length&&t("#scene.axis").parallax({scalarX:3,scalarY:3,frictionX:.5,frictionY:.5}),d.fadePageOn("a.preload-link","#preloader",300),t.fn.animated=d.animateCss,t(".animated-test-container").animated("slideInRight"),t(".js-add-album").length&&s.init("#add-album-modal",".js-add-album",".js-close-modal"),t(".js-add-photos").length&&s.init("#add-photos-modal",".js-add-photos",".js-close-modal"),t(".js-edit-photo").length&&s.init("#edit-photo-modal",".js-edit-photo",".js-close-modal"),t(".js-edit-user").length&&s.init("#edit-user-modal",".js-edit-user",".js-close-modal"),t(".js-edit-user-header").length&&s.init("#edit-user-header",".js-edit-user-header",".js-close-header"),t(".js-edit-album-header").length&&s.init("#edit-album-header",".js-edit-album-header",".js-close-header"),t(".js-show-photo-removing").length&&t(".js-show-photo-removing").on("click",a),t(".js-hide-photo-removing").length&&t(".js-hide-photo-removing").on("click",n),t(".js-open-slider").length>0&&l.init("#slider",".js-open-slider",".js-close-slider",".js-slider-next",".js-slider-prev"),t(".js-open-social-form").length&&t(".js-open-social-form").on("click",o),t(".js-close-form").length&&t(".js-close-form").on("click",r),t("#flip-card").click(function(){t("body").addClass("card_flipped")}),t("#unflip-card").click(function(e){e.preventDefault(),t("body").removeClass("card_flipped")}),t("#show-recovery").click(function(e){e.preventDefault(),t("body").addClass("show_recovery")}),t("#hide-recovery").click(function(e){e.preventDefault(),t("body").removeClass("show_recovery")}),t("div#dropzone").length){var f=2;t("div#dropzone").dropzone({url:"/",maxFilesize:f})}i(),c.init(),u.init()}(jQuery)},{"./modules/ajax.js":2,"./modules/animations.js":3,"./modules/image_preview.js":4,"./modules/modal.js":5,"./modules/preloader.js":6,"./modules/slider.js":7}],2:[function(e,t,a){var n=function(){function e(){$("#edit-user-header").on("submit",function(e){e.preventDefault();var t=new FormData($(e.target)[0]);$.ajax({method:"POST",url:"/user/savedata",data:t,processData:!1,contentType:!1}).done(function(a){"success"==a.status&&(void 0!==a.background&&$(".main-page").css({backgroundImage:"url("+a.background+")"}),void 0!==a.avatar&&$("#user-avatar").attr("src",a.avatar),$(".user-info__name").text(t.get("name")),$(".user-info__desc").text(t.get("description")),$("#social__link_vk").attr("href",t.get("vk")),$("#social__link_fb").attr("href",t.get("facebook")),$("#social__link_tw").attr("href",t.get("twitter")),$("#social__link_gg").attr("href",t.get("google")),$("#social__link_email").attr("href","mailto:"+t.get("email"))),$(e.target).removeClass("show").addClass("hide"),$("body").removeClass("has-overflow-hidden")})}),$("#form-add-album").on("submit",function(e){e.preventDefault();var t=new FormData($(e.target)[0]);console.log("add-album"),$.ajax({method:"POST",url:"/album/save",data:t,processData:!1,contentType:!1}).done(function(e){console.log(e)})})}return{init:e}}();t.exports={init:n.init}},{}],3:[function(e,t,a){function n(e,t,a){$(document).on("click",e,function(e){var n=$(this).attr("href");if("#"!=n[0])return e.preventDefault(),$(t).fadeIn(a,function(){return document.location=null!=n?n:"/"})})}var o=function(e){$(this).each(function(){var t=$(this);t.css({opacity:0}).addClass("animated").waypoint(function(a){"down"===a&&t.addClass(e).css({opacity:1})},{offset:"90%"})})};t.exports={animateCss:o,fadePageOn:n}},{}],4:[function(e,t,a){var n=function(){function e(){$("#input_avatar").on("change",function(){var e=this,t=$("#preview_avatar");if(e.files&&e.files[0]){var a=new FileReader;a.onload=function(e){t.attr("src",e.target.result)},a.readAsDataURL(e.files[0])}}),$("#input_background").on("change",function(){var e=this,t=$("#bg-edit-user");if(e.files&&e.files[0]){var a=new FileReader;a.onload=function(e){t.css({backgroundImage:"url("+e.target.result+")"})},a.readAsDataURL(e.files[0])}})}return{init:e}}();t.exports={init:n.init}},{}],5:[function(e,t,a){function n(e,t,a){var n=$(e),o=$(t),r=n.find(a),i=$("body");o.on("click",function(e){e.preventDefault(),n.removeClass("hide").addClass("show"),i.addClass("has-overflow-hidden")}),r.on("click",function(e){e.preventDefault(),n.addClass("hide").removeClass("show"),i.removeClass("has-overflow-hidden")})}t.exports={init:n}},{}],6:[function(e,t,a){var n=$("#preloader"),o=$("#preloader__percentage"),r=["background","backgroundImage","listStyleImage","borderImage","borderCornerImage","cursor"],i=["srcset"],s=/url\(\s*(['"]?)(.*?)\1\s*\)/g,l=[],d=0,c=0,u=$("#preloader__img .bar__outer"),f=$("#preloader__img .bar__center"),h=$("#preloader__img .bar__inner"),m=Math.PI*(2*u.attr("r")),v=Math.PI*(2*f.attr("r")),p=Math.PI*(2*h.attr("r"));t.exports=function(){function e(){var e=Math.ceil((c+1)/d*100);if(c+=1,e=e>100?100:e,u.css({strokeDashoffset:(100-e)/100*m}),e>50&&f.css({strokeDashoffset:(100-e)/100*v}),100==e&&h.css({strokeDashoffset:(100-e)/100*p}),o.html(e),c===d)return t()}function t(){o.css({animation:"none"}),n.delay(700).fadeOut(700,function(){o.remove()})}function a(t){for(var a=0;a<t;a++){var n=new Image;n.onload=e,n.onerror=e,l[a].srcset&&(n.srcset=l[a].srcset),n.src=l[a].src}}$("*").each(function(){var e=$(this);e.is("img")&&e.attr("src")&&l.push({src:e.attr("src"),element:e[0]}),$.each(r,function(t,a){var n,o=e.css(a);return!o||(n=s.exec(o),void(n&&l.push({src:n[2],element:e[0]})))}),$.each(i,function(t,a){var n=e.attr(a);return!n||void l.push({src:e.attr("src"),srcset:e.attr("srcset"),element:e[0]})})}),d=l.length,0===d?(o.html(100),t()):a(d)}},{}],7:[function(e,t,a){function n(e,t,a,n,d){s=$(e);var c=$(t),u=s.find(a),f=s.find(n),h=s.find(d),m=$("body");c.on("click",function(e){e.preventDefault(),l=$(this).closest(".album-item"),i(l),s.removeClass("hide").addClass("show"),m.addClass("has-overflow-hidden")}),u.on("click",function(e){e.preventDefault(),s.addClass("hide").removeClass("show"),m.removeClass("has-overflow-hidden")}),f.on("click",function(e){e.preventDefault(),o()}),h.on("click",function(e){e.preventDefault(),r()})}function o(){var e=l.next(".album-item");e.length&&(i(e),l=e)}function r(){var e=l.prev(".album-item");e.length&&(i(e),l=e)}function i(e){var t=e.data("thumb"),a=e.data("title"),n=e.data("likes"),o=e.data("user_name"),r=e.data("user_avatar"),i=e.data("desc"),l=s.find(".comments__holder"),d=e.find(".comments__item");l.html(""),d.each(function(e,t){l.append(t)});var i=e.data("desc"),i=e.data("desc"),i=e.data("desc");s.find(".slider__img").attr("src",t),s.find(".slider__title").html(a),s.find(".likes__count").html(n),s.find(".slider__text").html(i),s.find(".slider__author-name").html(o),s.find(".slider__author-photo img").attr("src",r);var c=s.find(".slider__photo"),u=s.find(".slider__img").height();c.animate({height:u},300)}var s,l;t.exports={init:n,showNext:o,showPrev:r}},{}]},{},[1]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJlIiwidCIsIm4iLCJyIiwicyIsIm8iLCJ1IiwiYSIsInJlcXVpcmUiLCJpIiwiZiIsIkVycm9yIiwiY29kZSIsImwiLCJleHBvcnRzIiwiY2FsbCIsImxlbmd0aCIsIjEiLCJtb2R1bGUiLCIkIiwic2hvd1Bob3RvUmVtb3ZpbmdCbG9jayIsInByZXZlbnREZWZhdWx0Iiwic2xpZGVVcCIsInNsaWRlRG93biIsImhpZGVQaG90b1JlbW92aW5nQmxvY2siLCJzaG93U29jaWFsRm9ybSIsInNvY2lhbEl0ZW0iLCJ0aGlzIiwiY2xvc2VzdCIsInNpYmxpbmdzIiwiZmluZCIsImhpZGUiLCJzaG93IiwiaGlkZVNvY2lhbEZvcm0iLCJwcmVsb2FkZXIiLCJtb2RhbCIsInNsaWRlciIsImFuaW1hdGlvbnMiLCJzZXRBamF4UmVzcG9uY2UiLCJpbWFnZVByZXZpZXciLCJwYXJhbGxheCIsInNjYWxhclgiLCJzY2FsYXJZIiwiZnJpY3Rpb25YIiwiZnJpY3Rpb25ZIiwiZmFkZVBhZ2VPbiIsImZuIiwiYW5pbWF0ZWQiLCJhbmltYXRlQ3NzIiwiaW5pdCIsIm9uIiwiY2xpY2siLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwibWF4RmlsZVNpemVNYiIsImRyb3B6b25lIiwidXJsIiwibWF4RmlsZXNpemUiLCJqUXVlcnkiLCIuL21vZHVsZXMvYWpheC5qcyIsIi4vbW9kdWxlcy9hbmltYXRpb25zLmpzIiwiLi9tb2R1bGVzL2ltYWdlX3ByZXZpZXcuanMiLCIuL21vZHVsZXMvbW9kYWwuanMiLCIuL21vZHVsZXMvcHJlbG9hZGVyLmpzIiwiLi9tb2R1bGVzL3NsaWRlci5qcyIsIjIiLCJzZXRBamF4UmVzcG9uY2VzIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsInRhcmdldCIsImFqYXgiLCJtZXRob2QiLCJkYXRhIiwicHJvY2Vzc0RhdGEiLCJjb250ZW50VHlwZSIsImRvbmUiLCJtc2ciLCJzdGF0dXMiLCJ1bmRlZmluZWQiLCJiYWNrZ3JvdW5kIiwiY3NzIiwiYmFja2dyb3VuZEltYWdlIiwiYXZhdGFyIiwiYXR0ciIsInRleHQiLCJnZXQiLCJjb25zb2xlIiwibG9nIiwiMyIsImxpbmtfc2VsZWN0b3IiLCJvdmVybGF5X3NlbGVjdG9yIiwidGltZSIsImRvY3VtZW50IiwiaHJlZiIsImZhZGVJbiIsImxvY2F0aW9uIiwiaW5fZWZmZWN0IiwiZWFjaCIsImVsZW0iLCJvcGFjaXR5Iiwid2F5cG9pbnQiLCJkaXIiLCJvZmZzZXQiLCI0IiwiaW5wdXQiLCJmaWxlcyIsInJlYWRlciIsIkZpbGVSZWFkZXIiLCJvbmxvYWQiLCJyZXN1bHQiLCJyZWFkQXNEYXRhVVJMIiwiYmciLCI1IiwiY29udGFpbmVyIiwib3BlbkJ0biIsImNsb3NlQnRuIiwib3BlbiIsImNsb3NlIiwiYm9keSIsIjYiLCJwcmVsb2FkZXJfY29udGFpbmVyIiwicHJlbG9hZGVyX3BlcmNlbnRhZ2UiLCJoYXNJbWFnZVByb3BlcnRpZXMiLCJoYXNJbWFnZUF0dHJpYnV0ZXMiLCJtYXRjaF91cmwiLCJhbGxfaW1hZ2VzIiwidG90YWwiLCJjb3VudCIsImNpcmNsZV9vIiwiY2lyY2xlX2MiLCJjaXJjbGVfaSIsImxlbmd0aF9vIiwiTWF0aCIsIlBJIiwibGVuZ3RoX2MiLCJsZW5ndGhfaSIsImltZ19sb2FkZWQiLCJwZXJjZW50YWdlIiwiY2VpbCIsInN0cm9rZURhc2hvZmZzZXQiLCJodG1sIiwiZG9uZV9sb2FkaW5nIiwiYW5pbWF0aW9uIiwiZGVsYXkiLCJmYWRlT3V0IiwicmVtb3ZlIiwiaW1hZ2VzX2xvb3AiLCJ0ZXN0X2ltYWdlIiwiSW1hZ2UiLCJvbmVycm9yIiwic3Jjc2V0Iiwic3JjIiwiZWxlbWVudCIsImlzIiwicHVzaCIsInByb3BlcnR5IiwibWF0Y2giLCJwcm9wZXJ0eVZhbHVlIiwiZXhlYyIsImF0dHJpYnV0ZSIsImF0dHJpYnV0ZVZhbHVlIiwiNyIsIm5leHRCdG4iLCJwcmV2QnRuIiwibmV4dCIsInByZXYiLCJjdXJyZW50Iiwic2hvd1NsaWRlIiwic2hvd05leHQiLCJzaG93UHJldiIsIm5leHRTbGlkZSIsInByZXZTbGlkZSIsIl9pdGVtIiwiaW1nX3RodW1iIiwiaW1nX3RpdGxlIiwiaW1nX2xpa2VzIiwiaW1nX3VzZXJfbmFtZSIsImltZ191c2VyX2F2YXRhciIsImltZ19kZXNjIiwiY29tbWVudHNfaG9sZGVyIiwiaW1nX2NvbW1lbnRzIiwia2V5IiwidmFsdWUiLCJhcHBlbmQiLCJzbGlkZXJQaG90byIsInNsaWRlSGVpZ2h0IiwiaGVpZ2h0IiwiYW5pbWF0ZSJdLCJtYXBwaW5ncyI6IkNBQUEsUUFBVUEsR0FBRUMsRUFBRUMsRUFBRUMsR0FBRyxRQUFTQyxHQUFFQyxFQUFFQyxHQUFHLElBQUlKLEVBQUVHLEdBQUcsQ0FBQyxJQUFJSixFQUFFSSxHQUFHLENBQUMsR0FBSUUsR0FBa0Isa0JBQVRDLFVBQXFCQSxPQUFRLEtBQUlGLEdBQUdDLEVBQUUsTUFBT0EsR0FBRUYsR0FBRSxFQUFJLElBQUdJLEVBQUUsTUFBT0EsR0FBRUosR0FBRSxFQUFJLElBQUlLLEdBQUUsR0FBSUMsT0FBTSx1QkFBdUJOLEVBQUUsSUFBSyxNQUFNSyxHQUFFRSxLQUFLLG1CQUFtQkYsRUFBRSxHQUFJRyxHQUFFWCxFQUFFRyxJQUFJUyxXQUFZYixHQUFFSSxHQUFHLEdBQUdVLEtBQUtGLEVBQUVDLFFBQVEsU0FBU2QsR0FBRyxHQUFJRSxHQUFFRCxFQUFFSSxHQUFHLEdBQUdMLEVBQUcsT0FBT0ksR0FBRUYsRUFBRUEsRUFBRUYsSUFBSWEsRUFBRUEsRUFBRUMsUUFBUWQsRUFBRUMsRUFBRUMsRUFBRUMsR0FBRyxNQUFPRCxHQUFFRyxHQUFHUyxRQUFrRCxJQUFJLEdBQTFDTCxHQUFrQixrQkFBVEQsVUFBcUJBLFFBQWdCSCxFQUFFLEVBQUVBLEVBQUVGLEVBQUVhLE9BQU9YLElBQUlELEVBQUVELEVBQUVFLEdBQUksT0FBT0QsS0FBS2EsR0FBRyxTQUFTVCxFQUFRVSxFQUFPSixJQUN2ZCxTQUFVSyxHQUNULFlBNEZBLFNBQVNDLEdBQXVCcEIsR0FDL0JBLEVB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MkosRUFBY3JKLEVBQU9OLEtBQUssZ0JBQWdCNEosUUFDOUNGLEdBQVlHLFNBQVNELE9BQVVELEdBQWMsS0FqRy9DLEdBQUlySixHQUNBa0ksQ0FvR0pwSixHQUFPSixTQUNObUMsS0FBT0EsRUFDUHVILFNBQVVBLEVBQ1ZDLFNBQVVBLGFBSUEiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkoezE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuKGZ1bmN0aW9uKCQpIHtcclxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHJcblx0dmFyIHByZWxvYWRlciA9IHJlcXVpcmUoXCIuL21vZHVsZXMvcHJlbG9hZGVyLmpzXCIpLFxyXG5cdFx0Ly8gaGVscGVycyA9IHJlcXVpcmUoXCIuL21vZHVsZXMvaGVscGVycy5qc1wiKSxcclxuXHRcdG1vZGFsID0gcmVxdWlyZShcIi4vbW9kdWxlcy9tb2RhbC5qc1wiKSxcclxuXHRcdHNsaWRlciA9IHJlcXVpcmUoXCIuL21vZHVsZXMvc2xpZGVyLmpzXCIpLFxyXG5cdFx0YW5pbWF0aW9ucyA9IHJlcXVpcmUoXCIuL21vZHVsZXMvYW5pbWF0aW9ucy5qc1wiKSxcclxuXHRcdHNldEFqYXhSZXNwb25jZSA9IHJlcXVpcmUoXCIuL21vZHVsZXMvYWpheC5qc1wiKSxcclxuXHRcdGltYWdlUHJldmlldyA9IHJlcXVpcmUoXCIuL21vZHVsZXMvaW1hZ2VfcHJldmlldy5qc1wiKTtcclxuXHJcblx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblx0Ly8gQWRhcHRpdmUgYnJlYWtwb2ludHNcclxuXHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHQvLyB2YXIgc2Nyb2xsYmFyX3dpZHRoID0gaGVscGVycy5nZXRTY3JvbGxiYXJXaWR0aCgpLFxyXG5cdC8vIFx0c2NyZWVuX3NpemVzID0ge1xyXG5cdC8vIFx0XHRtb2JpbGUgOiA0ODAgLSBzY3JvbGxiYXJfd2lkdGgsXHJcblx0Ly8gXHRcdHRhYmxldCA6IDc2OCAtIHNjcm9sbGJhcl93aWR0aCxcclxuXHQvLyBcdFx0bGltaXQgOiAyMDAwIC0gc2Nyb2xsYmFyX3dpZHRoXHJcblx0Ly8gXHR9O1xyXG5cclxuXHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHQvLyBQYXJhbGxheFxyXG5cdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuXHQvLyBNYWluIHBhZ2UgbW91c2UgcGFyYWxsYXhcclxuXHRpZigkKFwiI3NjZW5lLmF4aXNcIikubGVuZ3RoKXtcclxuXHRcdCQoXCIjc2NlbmUuYXhpc1wiKS5wYXJhbGxheCh7XHJcblx0XHRcdHNjYWxhclg6IDMsXHJcblx0XHRcdHNjYWxhclk6IDMsXHJcblx0XHRcdGZyaWN0aW9uWDogMC41LFxyXG5cdFx0XHRmcmljdGlvblk6IDAuNVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHQvLyBBbmltYXRpb25zIGV4YW1wbGVcclxuXHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHRhbmltYXRpb25zLmZhZGVQYWdlT24oXCJhLnByZWxvYWQtbGlua1wiLCBcIiNwcmVsb2FkZXJcIiwgMzAwKTtcclxuXHJcblx0JC5mbi5hbmltYXRlZCA9IGFuaW1hdGlvbnMuYW5pbWF0ZUNzcztcclxuXHQvLyBFeGFtcGxlXHJcblx0JChcIi5hbmltYXRlZC10ZXN0LWNvbnRhaW5lclwiKS5hbmltYXRlZChcInNsaWRlSW5SaWdodFwiKTtcclxuXHJcblxyXG5cclxuXHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHQvLyBJbml0IEFkZCBBbGJ1bSBNb2RhbFxyXG5cdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cdGlmICgkKFwiLmpzLWFkZC1hbGJ1bVwiKS5sZW5ndGgpIHtcclxuXHRcdG1vZGFsLmluaXQoXCIjYWRkLWFsYnVtLW1vZGFsXCIsIFwiLmpzLWFkZC1hbGJ1bVwiLCBcIi5qcy1jbG9zZS1tb2RhbFwiKTtcclxuXHR9XHJcblxyXG5cdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cdC8vIEluaXQgQWRkIFBob3RvcyBNb2RhbFxyXG5cdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cdGlmICgkKFwiLmpzLWFkZC1waG90b3NcIikubGVuZ3RoKSB7XHJcblx0XHRtb2RhbC5pbml0KFwiI2FkZC1waG90b3MtbW9kYWxcIiwgXCIuanMtYWRkLXBob3Rvc1wiLCBcIi5qcy1jbG9zZS1tb2RhbFwiKTtcclxuXHR9XHJcblxyXG5cdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cdC8vIEluaXQgRWRpdCBQaG90byBNb2RhbFxyXG5cdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cdGlmICgkKFwiLmpzLWVkaXQtcGhvdG9cIikubGVuZ3RoKSB7XHJcblx0XHRtb2RhbC5pbml0KFwiI2VkaXQtcGhvdG8tbW9kYWxcIiwgXCIuanMtZWRpdC1waG90b1wiLCBcIi5qcy1jbG9zZS1tb2RhbFwiKTtcclxuXHR9XHJcblxyXG5cdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cdC8vIEluaXQgRWRpdCBVc2VyIE1vZGFsXHJcblx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblx0aWYgKCQoXCIuanMtZWRpdC11c2VyXCIpLmxlbmd0aCkge1xyXG5cdFx0bW9kYWwuaW5pdChcIiNlZGl0LXVzZXItbW9kYWxcIiwgXCIuanMtZWRpdC11c2VyXCIsIFwiLmpzLWNsb3NlLW1vZGFsXCIpO1xyXG5cdH1cclxuXHJcblxyXG5cdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cdC8vIEluaXQgRWRpdCBVc2VyIE1vZGFsIChpbiBIZWFkZXIpXHJcblx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblx0aWYgKCQoXCIuanMtZWRpdC11c2VyLWhlYWRlclwiKS5sZW5ndGgpIHtcclxuXHRcdG1vZGFsLmluaXQoXCIjZWRpdC11c2VyLWhlYWRlclwiLCBcIi5qcy1lZGl0LXVzZXItaGVhZGVyXCIsIFwiLmpzLWNsb3NlLWhlYWRlclwiKTtcclxuXHR9XHJcblxyXG5cdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cdC8vIEluaXQgRWRpdCBBbGJ1bSBNb2RhbCAoaW4gSGVhZGVyKVxyXG5cdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cdGlmICgkKFwiLmpzLWVkaXQtYWxidW0taGVhZGVyXCIpLmxlbmd0aCkge1xyXG5cdFx0bW9kYWwuaW5pdChcIiNlZGl0LWFsYnVtLWhlYWRlclwiLCBcIi5qcy1lZGl0LWFsYnVtLWhlYWRlclwiLCBcIi5qcy1jbG9zZS1oZWFkZXJcIik7XHJcblx0fVxyXG5cclxuXHJcblx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblx0Ly8gRWRpdCBVc2VyIE1vZGFsIC0gRGVsZXRlIFBob3RvXHJcblx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblx0ZnVuY3Rpb24gc2hvd1Bob3RvUmVtb3ZpbmdCbG9jayhlKSB7XHJcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHQkKFwiLnBob3RvLWVkaXRpbmdcIikuc2xpZGVVcCgzMDApO1xyXG5cdFx0JChcIi5waG90by1yZW1vdmluZ1wiKS5zbGlkZURvd24oMzAwKTtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIGhpZGVQaG90b1JlbW92aW5nQmxvY2soZSkge1xyXG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0JChcIi5waG90by1yZW1vdmluZ1wiKS5zbGlkZVVwKDMwMCk7XHJcblx0XHQkKFwiLnBob3RvLWVkaXRpbmdcIikuc2xpZGVEb3duKDMwMCk7XHJcblx0fVxyXG5cclxuXHRpZiAoJChcIi5qcy1zaG93LXBob3RvLXJlbW92aW5nXCIpLmxlbmd0aCkge1xyXG5cdFx0JChcIi5qcy1zaG93LXBob3RvLXJlbW92aW5nXCIpLm9uKFwiY2xpY2tcIiwgc2hvd1Bob3RvUmVtb3ZpbmdCbG9jayk7XHJcblx0fVxyXG5cclxuXHRpZiAoJChcIi5qcy1oaWRlLXBob3RvLXJlbW92aW5nXCIpLmxlbmd0aCkge1xyXG5cdFx0JChcIi5qcy1oaWRlLXBob3RvLXJlbW92aW5nXCIpLm9uKFwiY2xpY2tcIiwgaGlkZVBob3RvUmVtb3ZpbmdCbG9jayk7XHJcblx0fVxyXG5cclxuXHJcblx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblx0Ly8gSW5pdCBFZGl0IEFsYnVtIE1vZGFsIChpbiBIZWFkZXIpXHJcblx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblx0aWYgKCQoXCIuanMtb3Blbi1zbGlkZXJcIikubGVuZ3RoID4gMCkge1xyXG5cdFx0c2xpZGVyLmluaXQoXCIjc2xpZGVyXCIsIFwiLmpzLW9wZW4tc2xpZGVyXCIsIFwiLmpzLWNsb3NlLXNsaWRlclwiLCBcIi5qcy1zbGlkZXItbmV4dFwiLCBcIi5qcy1zbGlkZXItcHJldlwiKTtcclxuXHR9XHJcblxyXG5cclxuXHJcblxyXG5cdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cdC8vIFNob3cgU29jaWFsIEl0ZW1zIEZvcm1zXHJcblx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblx0ZnVuY3Rpb24gc2hvd1NvY2lhbEZvcm0oZSkge1xyXG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0dmFyIHNvY2lhbEl0ZW0gPSAgJCh0aGlzKS5jbG9zZXN0KFwiLnNvY2lhbF9faXRlbVwiKTtcclxuXHRcdHNvY2lhbEl0ZW0uc2libGluZ3MoKS5maW5kKFwiLnNvY2lhbF9fZm9ybVwiKS5oaWRlKCk7XHJcblx0XHRzb2NpYWxJdGVtLmZpbmQoXCIuc29jaWFsX19mb3JtXCIpLnNob3coKTtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIGhpZGVTb2NpYWxGb3JtKGUpIHtcclxuXHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdCQodGhpcykuY2xvc2VzdChcIi5zb2NpYWxfX2Zvcm1cIikuaGlkZSgpO1xyXG5cdH1cclxuXHJcblx0aWYgKCQoXCIuanMtb3Blbi1zb2NpYWwtZm9ybVwiKS5sZW5ndGgpIHtcclxuXHRcdCQoXCIuanMtb3Blbi1zb2NpYWwtZm9ybVwiKS5vbihcImNsaWNrXCIsIHNob3dTb2NpYWxGb3JtKTtcclxuXHR9XHJcblx0aWYgKCQoXCIuanMtY2xvc2UtZm9ybVwiKS5sZW5ndGgpIHtcclxuXHRcdCQoXCIuanMtY2xvc2UtZm9ybVwiKS5vbihcImNsaWNrXCIsIGhpZGVTb2NpYWxGb3JtKTtcclxuXHR9XHJcblxyXG5cclxuXHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHQvLyBMb2dpbiBjYXJkIGZsaXBcclxuXHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHQkKFwiI2ZsaXAtY2FyZFwiKS5jbGljayhmdW5jdGlvbigpIHtcclxuXHRcdCQoXCJib2R5XCIpLmFkZENsYXNzKFwiY2FyZF9mbGlwcGVkXCIpO1xyXG5cdH0pO1xyXG5cclxuXHQkKFwiI3VuZmxpcC1jYXJkXCIpLmNsaWNrKGZ1bmN0aW9uKGUpIHtcclxuXHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdCQoXCJib2R5XCIpLnJlbW92ZUNsYXNzKFwiY2FyZF9mbGlwcGVkXCIpO1xyXG5cdH0pO1xyXG5cclxuXHJcblx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblx0Ly8gTG9naW4gc2hvdyBSZWNvdmVyeSBwYXNzd29yZCBDYXJkXHJcblx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblx0JChcIiNzaG93LXJlY292ZXJ5XCIpLmNsaWNrKGZ1bmN0aW9uKGUpIHtcclxuXHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdCQoXCJib2R5XCIpLmFkZENsYXNzKFwic2hvd19yZWNvdmVyeVwiKTtcclxuXHR9KTtcclxuXHJcblx0JChcIiNoaWRlLXJlY292ZXJ5XCIpLmNsaWNrKGZ1bmN0aW9uKGUpIHtcclxuXHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdCQoXCJib2R5XCIpLnJlbW92ZUNsYXNzKFwic2hvd19yZWNvdmVyeVwiKTtcclxuXHR9KTtcclxuXHJcblx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblx0Ly8gRHJvcHpvbmUgKEFkZCBwaG90b3MpXHJcblx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5cdGlmICgkKFwiZGl2I2Ryb3B6b25lXCIpLmxlbmd0aCkge1xyXG5cclxuXHRcdHZhciBtYXhGaWxlU2l6ZU1iID0gMjtcclxuXHJcblx0XHQkKFwiZGl2I2Ryb3B6b25lXCIpLmRyb3B6b25lKHtcclxuXHRcdFx0dXJsOiBcIi9cIiAsXHJcblx0XHRcdG1heEZpbGVzaXplOiBtYXhGaWxlU2l6ZU1iXHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cclxuXHRwcmVsb2FkZXIoKTtcclxuXHJcblx0c2V0QWpheFJlc3BvbmNlLmluaXQoKTtcclxuXHRpbWFnZVByZXZpZXcuaW5pdCgpO1xyXG5cclxufSkoalF1ZXJ5KTtcbn0se1wiLi9tb2R1bGVzL2FqYXguanNcIjoyLFwiLi9tb2R1bGVzL2FuaW1hdGlvbnMuanNcIjozLFwiLi9tb2R1bGVzL2ltYWdlX3ByZXZpZXcuanNcIjo0LFwiLi9tb2R1bGVzL21vZGFsLmpzXCI6NSxcIi4vbW9kdWxlcy9wcmVsb2FkZXIuanNcIjo2LFwiLi9tb2R1bGVzL3NsaWRlci5qc1wiOjd9XSwyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbi8qKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuKiAtLS0tLSDQo9GB0YLQsNC90L7QstC60LAgYWpheC3Qt9Cw0L/RgNC+0YHQvtCyIC0tLS0tLS0tXHJcbiogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cclxuXHJcbnZhciBzZXRBamF4UmVzcG9uY2VzID0gKGZ1bmN0aW9uKCkge1xyXG5cclxuICBmdW5jdGlvbiBpbml0KCkge1xyXG5cclxuICAgIC8vINCg0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40LUg0LTQsNC90L3Ri9GFINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xyXG4gICAgJCgnI2VkaXQtdXNlci1oZWFkZXInKS5vbignc3VibWl0JywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoJChlLnRhcmdldClbMF0pO1xyXG5cclxuICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgdXJsOiBcIi91c2VyL3NhdmVkYXRhXCIsXHJcbiAgICAgICAgICAgIGRhdGE6IGZvcm1EYXRhLFxyXG4gICAgICAgICAgICBwcm9jZXNzRGF0YTogZmFsc2UsXHJcbiAgICAgICAgICAgIGNvbnRlbnRUeXBlOiBmYWxzZVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5kb25lKGZ1bmN0aW9uIChtc2cpIHtcclxuLy8gY29uc29sZS5sb2cobXNnKTtcclxuXHJcbiAgICAgICAgICAgIGlmKG1zZy5zdGF0dXMgPT0gJ3N1Y2Nlc3MnKSB7XHJcbiAgICAgICAgICAgICAgaWYobXNnLmJhY2tncm91bmQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgJCgnLm1haW4tcGFnZScpLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRJbWFnZTogXCJ1cmwoXCIrbXNnLmJhY2tncm91bmQrXCIpXCJcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBpZihtc2cuYXZhdGFyICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICQoJyN1c2VyLWF2YXRhcicpLmF0dHIoJ3NyYycsIG1zZy5hdmF0YXIpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAkKCcudXNlci1pbmZvX19uYW1lJykudGV4dChmb3JtRGF0YS5nZXQoJ25hbWUnKSk7XHJcbiAgICAgICAgICAgICAgJCgnLnVzZXItaW5mb19fZGVzYycpLnRleHQoZm9ybURhdGEuZ2V0KCdkZXNjcmlwdGlvbicpKTtcclxuICAgICAgICAgICAgICAkKCcjc29jaWFsX19saW5rX3ZrJykuYXR0cignaHJlZicsIGZvcm1EYXRhLmdldCgndmsnKSk7XHJcbiAgICAgICAgICAgICAgJCgnI3NvY2lhbF9fbGlua19mYicpLmF0dHIoJ2hyZWYnLCBmb3JtRGF0YS5nZXQoJ2ZhY2Vib29rJykpO1xyXG4gICAgICAgICAgICAgICQoJyNzb2NpYWxfX2xpbmtfdHcnKS5hdHRyKCdocmVmJywgZm9ybURhdGEuZ2V0KCd0d2l0dGVyJykpO1xyXG4gICAgICAgICAgICAgICQoJyNzb2NpYWxfX2xpbmtfZ2cnKS5hdHRyKCdocmVmJywgZm9ybURhdGEuZ2V0KCdnb29nbGUnKSk7XHJcbiAgICAgICAgICAgICAgJCgnI3NvY2lhbF9fbGlua19lbWFpbCcpLmF0dHIoJ2hyZWYnLCBcIm1haWx0bzpcIitmb3JtRGF0YS5nZXQoJ2VtYWlsJykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICQoZS50YXJnZXQpLnJlbW92ZUNsYXNzKCdzaG93JykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgJCgnYm9keScpLnJlbW92ZUNsYXNzKCdoYXMtb3ZlcmZsb3ctaGlkZGVuJyk7XHJcbiAgICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vINCU0L7QsdCw0LLQu9C10L3QuNC1INCw0LvRjNCx0L7QvNCwXHJcbiAgICAkKCcjZm9ybS1hZGQtYWxidW0nKS5vbignc3VibWl0JywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoJChlLnRhcmdldClbMF0pO1xyXG5jb25zb2xlLmxvZygnYWRkLWFsYnVtJyk7XHJcbiAgICAgICQuYWpheCh7XHJcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICB1cmw6IFwiL2FsYnVtL3NhdmVcIixcclxuICAgICAgICBkYXRhOiBmb3JtRGF0YSxcclxuICAgICAgICBwcm9jZXNzRGF0YTogZmFsc2UsXHJcbiAgICAgICAgY29udGVudFR5cGU6IGZhbHNlXHJcbiAgICAgIH0pXHJcbiAgICAgIC5kb25lKGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhtc2cpO1xyXG4gICAgICB9KVxyXG4gICAgfSlcclxuXHJcbiAgfVxyXG4gIFxyXG4gIHJldHVybiB7XHJcbiAgICBpbml0OiBpbml0XHJcbiAgfVxyXG59KCkpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgaW5pdDogc2V0QWpheFJlc3BvbmNlcy5pbml0XHJcbn07XG59LHt9XSwzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBBbmltYXRlIGVsZW1lbnRzIG9uIHNjcm9sbC4gQmFzZWQgb24gd2F5cG9pbnRzLmpzXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG52YXIgYW5pbWF0ZUNzcyA9IGZ1bmN0aW9uIChpbl9lZmZlY3QpIHtcclxuXHQkKHRoaXMpLmVhY2goZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgZWxlbSA9ICQodGhpcyk7XHJcblx0XHRlbGVtLmNzcyh7b3BhY2l0eTowfSlcclxuXHRcdFx0LmFkZENsYXNzKFwiYW5pbWF0ZWRcIilcclxuXHRcdFx0LndheXBvaW50KGZ1bmN0aW9uKGRpcikge1xyXG5cdFx0XHRcdGlmIChkaXIgPT09IFwiZG93blwiKSB7XHJcblx0XHRcdFx0XHRlbGVtLmFkZENsYXNzKGluX2VmZmVjdCkuY3NzKHtvcGFjaXR5OjF9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sXHJcblx0XHRcdHtcclxuXHRcdFx0XHRvZmZzZXQ6IFwiOTAlXCJcclxuXHRcdFx0fSk7XHJcblx0fSk7XHJcbn07XHJcblxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gU2hvdyBvd2VybGF5IGxheWVyIHdoZW4gc3BlY2lmaWVkIGxpbmsgaGFzIGJlZW4gY2xpY2tlZFxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5mdW5jdGlvbiBmYWRlUGFnZU9uIChsaW5rX3NlbGVjdG9yLCBvdmVybGF5X3NlbGVjdG9yLCB0aW1lKXtcclxuXHQkKGRvY3VtZW50KS5vbihcImNsaWNrXCIsIGxpbmtfc2VsZWN0b3IsIGZ1bmN0aW9uKGUpIHtcclxuXHRcdHZhciBocmVmID0gJCh0aGlzKS5hdHRyKFwiaHJlZlwiKTtcclxuXHRcdGlmKGhyZWZbMF0hPVwiI1wiKXtcclxuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuXHRcdFx0cmV0dXJuICQob3ZlcmxheV9zZWxlY3RvcilcclxuXHRcdFx0XHQuZmFkZUluKHRpbWUsIGZ1bmN0aW9uKCl7XHJcblx0XHRcdFx0XHRyZXR1cm4gZG9jdW1lbnQubG9jYXRpb24gPSBocmVmICE9IG51bGwgPyBocmVmIDogXCIvXCI7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHR9KTtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG5cdGFuaW1hdGVDc3MgOiBhbmltYXRlQ3NzLFxyXG5cdGZhZGVQYWdlT24gOiBmYWRlUGFnZU9uXHJcbn07XG59LHt9XSw0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbi8qKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICogLS0tLS0g0J/QvtC00LrQu9GO0YfQtdC90LjQtSDQv9GA0LXQtNC/0YDQvtGB0LzQvtGC0YDQsCDRhNC+0YLQviDQuCDRhNC+0L3QsCAtLS0tLS0tLVxyXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXHJcblxyXG52YXIgaW1hZ2VQcmV2aWV3ID0gKGZ1bmN0aW9uKCkge1xyXG5cclxuICBmdW5jdGlvbiBpbml0KCkge1xyXG5cclxuICAgIC8vIEF2YXRhciBwcmV2aWV3XHJcbiAgICAkKCcjaW5wdXRfYXZhdGFyJykub24oJ2NoYW5nZScsIGZ1bmN0aW9uKCl7XHJcbiAgICAgIHZhciBpbnB1dCA9IHRoaXMsXHJcbiAgICAgICAgICBhdmF0YXIgPSAkKCcjcHJldmlld19hdmF0YXInKTtcclxuXHJcbiAgICAgIGlmIChpbnB1dC5maWxlcyAmJiBpbnB1dC5maWxlc1swXSkge1xyXG4gICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xyXG5cclxuICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgICBhdmF0YXIuYXR0cihcInNyY1wiLCBlLnRhcmdldC5yZXN1bHQpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGlucHV0LmZpbGVzWzBdKTtcclxuXHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIEJhY2tncm91bmQgcHJldmlld1xyXG4gICAgJCgnI2lucHV0X2JhY2tncm91bmQnKS5vbignY2hhbmdlJywgZnVuY3Rpb24oKXtcclxuICAgICAgdmFyIGlucHV0ID0gdGhpcyxcclxuICAgICAgICAgIGJnID0gJCgnI2JnLWVkaXQtdXNlcicpO1xyXG5cclxuICAgICAgaWYgKGlucHV0LmZpbGVzICYmIGlucHV0LmZpbGVzWzBdKSB7XHJcbiAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XHJcblxyXG4gICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbihlKXtcclxuICAgICAgICAgIGJnLmNzcyh7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmRJbWFnZTogXCJ1cmwoXCIrIGUudGFyZ2V0LnJlc3VsdCArXCIpXCJcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGlucHV0LmZpbGVzWzBdKTtcclxuXHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGluaXQ6IGluaXRcclxuICB9XHJcbn0oKSk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICBpbml0OiBpbWFnZVByZXZpZXcuaW5pdFxyXG59O1xufSx7fV0sNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5mdW5jdGlvbiBpbml0KGNvbnRhaW5lciwgb3BlbkJ0biwgY2xvc2VCdG4pe1xyXG5cdHZhciBtb2RhbCA9ICQoY29udGFpbmVyKTtcclxuXHR2YXIgb3BlbiA9ICQob3BlbkJ0bik7XHJcblx0dmFyIGNsb3NlID0gbW9kYWwuZmluZChjbG9zZUJ0bik7XHJcblx0dmFyIGJvZHkgPSAkKCdib2R5Jyk7XHJcblxyXG5cdG9wZW4ub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZSl7XHJcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRtb2RhbC5yZW1vdmVDbGFzcyhcImhpZGVcIikuYWRkQ2xhc3MoXCJzaG93XCIpO1xyXG5cdFx0Ym9keS5hZGRDbGFzcygnaGFzLW92ZXJmbG93LWhpZGRlbicpO1xyXG5cdH0pO1xyXG5cclxuXHRjbG9zZS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKXtcclxuXHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdG1vZGFsLmFkZENsYXNzKFwiaGlkZVwiKS5yZW1vdmVDbGFzcyhcInNob3dcIik7XHJcblx0XHRib2R5LnJlbW92ZUNsYXNzKCdoYXMtb3ZlcmZsb3ctaGlkZGVuJyk7XHJcblx0fSk7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuXHRpbml0IDogaW5pdFxyXG59O1xyXG5cclxuXG59LHt9XSw2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBQcmVsb2FkZXIgd2l0aCBwZXJjZW50YWdlIGJ5IGltYWdlIGNvdW50XHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG52YXJcdHByZWxvYWRlcl9jb250YWluZXIgPSAkKFwiI3ByZWxvYWRlclwiKSxcclxuXHRwcmVsb2FkZXJfcGVyY2VudGFnZSA9ICQoXCIjcHJlbG9hZGVyX19wZXJjZW50YWdlXCIpLFxyXG5cdGhhc0ltYWdlUHJvcGVydGllcyA9IFtcImJhY2tncm91bmRcIiwgXCJiYWNrZ3JvdW5kSW1hZ2VcIiwgXCJsaXN0U3R5bGVJbWFnZVwiLCBcImJvcmRlckltYWdlXCIsIFwiYm9yZGVyQ29ybmVySW1hZ2VcIiwgXCJjdXJzb3JcIl0sXHJcblx0aGFzSW1hZ2VBdHRyaWJ1dGVzID0gW1wic3Jjc2V0XCJdLFxyXG5cdG1hdGNoX3VybCA9IC91cmxcXChcXHMqKFsnXCJdPykoLio/KVxcMVxccypcXCkvZyxcclxuXHRhbGxfaW1hZ2VzID0gW10sXHJcblx0dG90YWwgPSAwLFxyXG5cdGNvdW50ID0gMDtcclxuXHJcbi8vIEFuaW1hdGUgaW5jbHVkZWQgU1ZHIGNpcmNsZXMgcHJlbG9hZGVyXHJcbnZhciBjaXJjbGVfbyA9ICQoXCIjcHJlbG9hZGVyX19pbWcgLmJhcl9fb3V0ZXJcIiksXHJcblx0Y2lyY2xlX2MgPSAkKFwiI3ByZWxvYWRlcl9faW1nIC5iYXJfX2NlbnRlclwiKSxcclxuXHRjaXJjbGVfaSA9ICQoXCIjcHJlbG9hZGVyX19pbWcgLmJhcl9faW5uZXJcIiksXHJcblx0bGVuZ3RoX28gPSBNYXRoLlBJKihjaXJjbGVfby5hdHRyKFwiclwiKSAqIDIpLFxyXG5cdGxlbmd0aF9jID0gTWF0aC5QSSooY2lyY2xlX2MuYXR0cihcInJcIikgKiAyKSxcclxuXHRsZW5ndGhfaSA9IE1hdGguUEkqKGNpcmNsZV9pLmF0dHIoXCJyXCIpICogMik7XHJcblxyXG5cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcHJlbG9hZGVyKCkge1xyXG5cclxuXHRmdW5jdGlvbiBpbWdfbG9hZGVkKCl7XHJcblx0XHR2YXIgcGVyY2VudGFnZSA9IE1hdGguY2VpbCggKGNvdW50KzEpIC8gdG90YWwgKiAxMDAgKTtcclxuXHJcblx0XHRjb3VudCArPSAxO1xyXG5cdFx0cGVyY2VudGFnZSA9IHBlcmNlbnRhZ2UgPiAxMDAgPyAxMDAgOiBwZXJjZW50YWdlO1xyXG5cclxuXHRcdC8vIERyYXcgb2Zmc2V0c1xyXG5cdFx0Ly8gMXN0IGNpcmNsZVxyXG5cdFx0Y2lyY2xlX28uY3NzKHtzdHJva2VEYXNob2Zmc2V0OiAoKDEwMC1wZXJjZW50YWdlKS8xMDApKmxlbmd0aF9vIH0pO1xyXG5cclxuXHRcdC8vIHdoZW4gdG8gc3RhcnQgMm5kIGNpcmNsZVxyXG5cdFx0aWYocGVyY2VudGFnZSA+IDUwKSB7XHJcblx0XHRcdGNpcmNsZV9jLmNzcyh7c3Ryb2tlRGFzaG9mZnNldDogKCgxMDAtcGVyY2VudGFnZSkvMTAwKSpsZW5ndGhfYyB9KTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyB3aGVuIHRvIHN0YXJ0IDNyZCBjaXJjbGVcclxuXHRcdGlmKHBlcmNlbnRhZ2UgPT0gMTAwKSB7XHJcblx0XHRcdGNpcmNsZV9pLmNzcyh7c3Ryb2tlRGFzaG9mZnNldDogKCgxMDAtcGVyY2VudGFnZSkvMTAwKSpsZW5ndGhfaSB9KTtcclxuXHRcdH1cclxuXHJcblx0XHRwcmVsb2FkZXJfcGVyY2VudGFnZS5odG1sKHBlcmNlbnRhZ2UpO1xyXG5cclxuXHRcdGlmKGNvdW50ID09PSB0b3RhbCl7XHJcblx0XHRcdHJldHVybiBkb25lX2xvYWRpbmcoKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIGRvbmVfbG9hZGluZygpe1xyXG5cdFx0cHJlbG9hZGVyX3BlcmNlbnRhZ2UuY3NzKHtcImFuaW1hdGlvblwiOlwibm9uZVwifSk7XHJcblx0XHRwcmVsb2FkZXJfY29udGFpbmVyLmRlbGF5KDcwMCkuZmFkZU91dCg3MDAsIGZ1bmN0aW9uKCl7XHJcblx0XHRcdC8vIENhbGxiYWNrcywgZS5nLjpcclxuXHRcdFx0cHJlbG9hZGVyX3BlcmNlbnRhZ2UucmVtb3ZlKCk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIGltYWdlc19sb29wICh0b3RhbCkge1xyXG5cdFx0Zm9yKHZhciBpPTA7IGk8dG90YWw7IGkrKyl7XHJcblx0XHRcdHZhciB0ZXN0X2ltYWdlID0gbmV3IEltYWdlKCk7XHJcblxyXG5cdFx0XHR0ZXN0X2ltYWdlLm9ubG9hZCA9IGltZ19sb2FkZWQ7XHJcblx0XHRcdHRlc3RfaW1hZ2Uub25lcnJvciA9IGltZ19sb2FkZWQ7XHJcblxyXG5cdFx0XHRpZiAoYWxsX2ltYWdlc1tpXS5zcmNzZXQpIHtcclxuXHRcdFx0XHR0ZXN0X2ltYWdlLnNyY3NldCA9IGFsbF9pbWFnZXNbaV0uc3Jjc2V0O1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0ZXN0X2ltYWdlLnNyYyA9IGFsbF9pbWFnZXNbaV0uc3JjO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Ly8gR2V0IGFsbCBpbWFnZXNcclxuXHQkKFwiKlwiKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuXHRcdHZhciBlbGVtZW50ID0gJCh0aGlzKTtcclxuXHJcblx0XHRpZiAoZWxlbWVudC5pcyhcImltZ1wiKSAmJiBlbGVtZW50LmF0dHIoXCJzcmNcIikpIHtcclxuXHRcdFx0YWxsX2ltYWdlcy5wdXNoKHtcclxuXHRcdFx0XHRzcmM6IGVsZW1lbnQuYXR0cihcInNyY1wiKSxcclxuXHRcdFx0XHRlbGVtZW50OiBlbGVtZW50WzBdXHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdCQuZWFjaChoYXNJbWFnZVByb3BlcnRpZXMsIGZ1bmN0aW9uIChpLCBwcm9wZXJ0eSkge1xyXG5cdFx0XHR2YXIgcHJvcGVydHlWYWx1ZSA9IGVsZW1lbnQuY3NzKHByb3BlcnR5KTtcclxuXHRcdFx0dmFyIG1hdGNoO1xyXG5cclxuXHRcdFx0aWYgKCFwcm9wZXJ0eVZhbHVlKSB7XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdG1hdGNoID0gbWF0Y2hfdXJsLmV4ZWMocHJvcGVydHlWYWx1ZSk7XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAobWF0Y2gpIHtcclxuXHRcdFx0XHRhbGxfaW1hZ2VzLnB1c2goe1xyXG5cdFx0XHRcdFx0c3JjOiBtYXRjaFsyXSxcclxuXHRcdFx0XHRcdGVsZW1lbnQ6IGVsZW1lbnRbMF1cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0JC5lYWNoKGhhc0ltYWdlQXR0cmlidXRlcywgZnVuY3Rpb24gKGksIGF0dHJpYnV0ZSkge1xyXG5cdFx0XHR2YXIgYXR0cmlidXRlVmFsdWUgPSBlbGVtZW50LmF0dHIoYXR0cmlidXRlKTtcclxuXHJcblx0XHRcdGlmICghYXR0cmlidXRlVmFsdWUpIHtcclxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0YWxsX2ltYWdlcy5wdXNoKHtcclxuXHRcdFx0XHRzcmM6IGVsZW1lbnQuYXR0cihcInNyY1wiKSxcclxuXHRcdFx0XHRzcmNzZXQ6IGVsZW1lbnQuYXR0cihcInNyY3NldFwiKSxcclxuXHRcdFx0XHRlbGVtZW50OiBlbGVtZW50WzBdXHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblx0fSk7XHJcblxyXG5cdHRvdGFsID0gYWxsX2ltYWdlcy5sZW5ndGg7XHJcblxyXG5cdC8vIFN0YXJ0IHByZWxvYWRlciBvciBleGl0XHJcblx0aWYgKHRvdGFsID09PSAwKSB7XHJcblx0XHRwcmVsb2FkZXJfcGVyY2VudGFnZS5odG1sKDEwMCk7XHJcblx0XHRkb25lX2xvYWRpbmcoKTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0aW1hZ2VzX2xvb3AodG90YWwpO1xyXG5cdH1cclxufTtcbn0se31dLDc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xudmFyIHNsaWRlcjtcclxudmFyIGN1cnJlbnQ7XHJcblxyXG5cclxuZnVuY3Rpb24gaW5pdChjb250YWluZXIsIG9wZW5CdG4sIGNsb3NlQnRuLCBuZXh0QnRuLCBwcmV2QnRuKXtcclxuXHRcdFx0c2xpZGVyID0gJChjb250YWluZXIpO1xyXG5cdHZhciBvcGVuID0gJChvcGVuQnRuKTtcclxuXHR2YXIgY2xvc2UgPSBzbGlkZXIuZmluZChjbG9zZUJ0bik7XHJcblx0dmFyIG5leHQgPSBzbGlkZXIuZmluZChuZXh0QnRuKTtcclxuXHR2YXIgcHJldiA9IHNsaWRlci5maW5kKHByZXZCdG4pO1xyXG5cdHZhciBib2R5ID0gJCgnYm9keScpO1xyXG5cclxuXHRvcGVuLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpe1xyXG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuXHRcdGN1cnJlbnQgPSAkKHRoaXMpLmNsb3Nlc3QoJy5hbGJ1bS1pdGVtJyk7XHJcblx0XHRzaG93U2xpZGUoY3VycmVudCk7XHJcblxyXG5cdFx0c2xpZGVyLnJlbW92ZUNsYXNzKFwiaGlkZVwiKS5hZGRDbGFzcyhcInNob3dcIik7XHJcblx0XHRib2R5LmFkZENsYXNzKCdoYXMtb3ZlcmZsb3ctaGlkZGVuJyk7XHJcblx0fSk7XHJcblxyXG5cdGNsb3NlLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpe1xyXG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0c2xpZGVyLmFkZENsYXNzKFwiaGlkZVwiKS5yZW1vdmVDbGFzcyhcInNob3dcIik7XHJcblx0XHRib2R5LnJlbW92ZUNsYXNzKCdoYXMtb3ZlcmZsb3ctaGlkZGVuJyk7XHJcblx0fSk7XHJcblxyXG5cdG5leHQub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZSl7XHJcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRzaG93TmV4dCgpO1xyXG5cdH0pO1xyXG5cclxuXHRwcmV2Lm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpe1xyXG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0c2hvd1ByZXYoKTtcclxuXHR9KTtcclxuXHJcbn07XHJcblxyXG5cclxuXHJcbmZ1bmN0aW9uIHNob3dOZXh0KCl7XHJcblx0XHR2YXIgbmV4dFNsaWRlID0gY3VycmVudC5uZXh0KCcuYWxidW0taXRlbScpO1xyXG5cdFx0aWYgKG5leHRTbGlkZS5sZW5ndGgpIHtcclxuXHRcdFx0c2hvd1NsaWRlKG5leHRTbGlkZSk7XHJcblx0XHRcdGN1cnJlbnQgPSBuZXh0U2xpZGU7XHJcblx0XHR9XHJcbn07XHJcblxyXG5mdW5jdGlvbiBzaG93UHJldigpe1xyXG5cdFx0dmFyIHByZXZTbGlkZSA9IGN1cnJlbnQucHJldignLmFsYnVtLWl0ZW0nKTtcclxuXHRcdGlmIChwcmV2U2xpZGUubGVuZ3RoKSB7XHJcblx0XHRcdHNob3dTbGlkZShwcmV2U2xpZGUpO1xyXG5cdFx0XHRjdXJyZW50ID0gcHJldlNsaWRlO1xyXG5cdFx0fVxyXG59O1xyXG5cclxuXHJcbmZ1bmN0aW9uIHNob3dTbGlkZShfaXRlbSl7XHJcblxyXG5cdFx0dmFyIGltZ190aHVtYiA9IF9pdGVtLmRhdGEoJ3RodW1iJyk7XHJcblx0XHR2YXIgaW1nX3RpdGxlID0gX2l0ZW0uZGF0YSgndGl0bGUnKTtcclxuXHRcdHZhciBpbWdfbGlrZXMgPSBfaXRlbS5kYXRhKCdsaWtlcycpO1xyXG5cdFx0dmFyIGltZ191c2VyX25hbWUgPSBfaXRlbS5kYXRhKCd1c2VyX25hbWUnKTtcclxuXHRcdHZhciBpbWdfdXNlcl9hdmF0YXIgPSBfaXRlbS5kYXRhKCd1c2VyX2F2YXRhcicpO1xyXG5cdFx0dmFyIGltZ19kZXNjID0gX2l0ZW0uZGF0YSgnZGVzYycpO1xyXG5cdFx0dmFyIGNvbW1lbnRzX2hvbGRlciA9IHNsaWRlci5maW5kKCcuY29tbWVudHNfX2hvbGRlcicpO1xyXG5cdFx0dmFyIGltZ19jb21tZW50cyA9IF9pdGVtLmZpbmQoJy5jb21tZW50c19faXRlbScpO1xyXG5cclxuXHJcblx0XHQvLyDQvtGH0LjRidC10L3QuNC1INCx0LvQvtC60LAg0LTQu9GPINC60L7QvNC80LXQvdGC0LDRgNC40LXQslxyXG5cdFx0Y29tbWVudHNfaG9sZGVyLmh0bWwoJycpO1xyXG5cclxuXHRcdC8vINC00L7QsdCw0LLQu9C10L3QuNC1INC60L7QvNC80LXQvdGC0LDRgNC40LXQslxyXG5cdFx0aW1nX2NvbW1lbnRzLmVhY2goIGZ1bmN0aW9uKGtleSwgdmFsdWUpe1xyXG5cdFx0XHRjb21tZW50c19ob2xkZXIuYXBwZW5kKHZhbHVlKTtcclxuXHRcdH0pO1xyXG5cclxuXHJcblxyXG5cdFx0dmFyIGltZ19kZXNjID0gX2l0ZW0uZGF0YSgnZGVzYycpO1xyXG5cdFx0dmFyIGltZ19kZXNjID0gX2l0ZW0uZGF0YSgnZGVzYycpO1xyXG5cdFx0dmFyIGltZ19kZXNjID0gX2l0ZW0uZGF0YSgnZGVzYycpO1xyXG5cclxuXHRcdHNsaWRlci5maW5kKCcuc2xpZGVyX19pbWcnKS5hdHRyKCdzcmMnLCBpbWdfdGh1bWIpO1xyXG5cdFx0c2xpZGVyLmZpbmQoJy5zbGlkZXJfX3RpdGxlJykuaHRtbChpbWdfdGl0bGUpO1xyXG5cdFx0c2xpZGVyLmZpbmQoJy5saWtlc19fY291bnQnKS5odG1sKGltZ19saWtlcyk7XHJcblx0XHRzbGlkZXIuZmluZCgnLnNsaWRlcl9fdGV4dCcpLmh0bWwoaW1nX2Rlc2MpO1xyXG5cdFx0c2xpZGVyLmZpbmQoJy5zbGlkZXJfX2F1dGhvci1uYW1lJykuaHRtbChpbWdfdXNlcl9uYW1lKTtcclxuXHRcdHNsaWRlci5maW5kKCcuc2xpZGVyX19hdXRob3ItcGhvdG8gaW1nJykuYXR0cignc3JjJywgaW1nX3VzZXJfYXZhdGFyKTtcclxuXHJcblxyXG5cclxuLy8gaGVpZ2h0IGFuaW1hdGlvblxyXG5cdFx0dmFyIHNsaWRlclBob3RvID0gIHNsaWRlci5maW5kKCcuc2xpZGVyX19waG90bycpO1xyXG5cdFx0dmFyIHNsaWRlSGVpZ2h0ID0gc2xpZGVyLmZpbmQoJy5zbGlkZXJfX2ltZycpLmhlaWdodCgpO1xyXG5cdFx0c2xpZGVyUGhvdG8uYW5pbWF0ZSh7J2hlaWdodCc6IHNsaWRlSGVpZ2h0fSwgMzAwKTtcclxuXHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG5cdGluaXQgOiBpbml0LFxyXG5cdHNob3dOZXh0OiBzaG93TmV4dCxcclxuXHRzaG93UHJldjogc2hvd1ByZXZcclxufTtcclxuXHJcblxufSx7fV19LHt9LFsxXSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
